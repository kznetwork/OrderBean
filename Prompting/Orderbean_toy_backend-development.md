# ì‘ì„±í•  ë°±ì—”ë“œ ê°œë°œ PRD
_Exported on 11/2/2025 at 16:18:25 GMT+9 from Cursor (2.0.43)_

---

**User**

Docs/PRD_Up1.md íŒŒì¼ì„ ì‚´í´ë³´ê³ ,ë°±ì—”ë“œ ê°œë°œì„ ìœ„í•œ PRDë¥¼ ì‘ì„±í•´ ê¸°ì¡´ Docs/ì— ì €ì¥í•´ ì£¼ì„¸ìš”.

1.ë°ì´í„° ëª¨ë¸

-Menus: ì»¤í”¼ ì´ë¦„, ì„¤ëª…, ê°€ê²©, ì´ë¯¸ì§€, ì¬ê³  ìˆ˜ëŸ‰

-Options: ì˜µì…˜ ì´ë¦„, ì˜µì…˜ ê°€ê²©, ì—°ê²°í•  ë©”ë‰´

-Orders: ì£¼ë¬¸ ì¼ì‹œ, ì£¼ë¬¸ ë‚´ìš©(ë©”ë‰´, ìˆ˜ëŸ‰, ì˜µì…˜, ê¸ˆì•¡)



2.ë°ì´í„° ìŠ¤í‚¤ë§ˆë¥¼ ìœ„í•œ ì‚¬ìš©ì íë¦„

1) Menusì— ìˆëŠ” ë‚´ìš©ì„ ê°€ì ¸ì™€ ë¸Œë¼ìš°ì € í™”ë©´ì— í‘œì‹œí•©ë‹ˆë‹¤. ì´ ë•Œ Menusì— ìˆëŠ”ì •ë³´ ì¤‘ ì¬ê³  ìˆ˜ëŸ‰ì€ ê´€ë¦¬ì í™”ë©´ì— í‘œì‹œí•©ë‹ˆë‹¤.

2) ì‚¬ìš©ìê°€ ì•± í™”ë©´ì—ì„œ ì»¤í”¼ ë©”ë‰´ë¥¼ì„ íƒí•´ ë‹´ê³ , ì„ íƒ ì •ë³´ëŠ” ì¥ë°”êµ¬ë‹ˆì— í‘œì‹œë©ë‹ˆë‹¤.

3) ì¥ë°”êµ¬ë‹ˆì—ì„œ 'ì£¼ë¬¸í•˜ê¸°'ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì£¼ë¬¸ì •ë³´ë¥¼ Ordersì— ì €ì¥í•©ë‹ˆë‹¤. Ordersì—ëŠ” ì£¼ë¬¸ ì‹œê°„ê³¼ ì£¼ë¬¸ ë‚´ìš©ì„(ë©”ë‰´, ìˆ˜ëŸ‰, ì˜µì…˜, ê¸ˆì•¡)ì„ ë‹´ìŠµë‹ˆë‹¤.

4) Ordersì˜ˆ ìˆëŠ” ì •ë³´ë¥¼ ê´€ë¦¬ì í™”ë©´ì˜ 'ì£¼ë¬¸ í˜„í™©'í‘œì‹œí•©ë‹ˆë‹¤. ì£¼ë¬¸ì˜ ê¸°ë³¸ ìƒíƒœë¥¼ 'ì£¼ë¬¸ ì ‘ìˆ˜'ì´ê³ , 'ì£¼ë¬¸ ì ‘ìˆ˜'ë¥¼ í´ë¦­í•˜ë©´ 'ì œì¡° ì¤‘'->'ì™„ë£Œ'ë¡œ ìƒíƒœê°€ ë³€ê²½ë©ë‹ˆë‹¤.



3. API ì„¤ê³„

-'ì£¼ë¬¸í•˜ê¸°'ë©”ë‰´ë¥¼ í´ë¦­í•˜ë©´ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì»¤í”¼ ë©”ë‰´ ëª©ë¡ì„ ë¶ˆëŸ¬ì™€ì„œ ë³´ì—¬ ì¤ë‹ˆë‹¤.

-ì‚¬ìš©ìê°€ ì»¤í”¼ë¥¼ ì„ íƒí•˜ê³  ì£¼ë¬¸í•˜ê¸° ë²„íŠ¼ì„ ëˆ„ë¥´ë©´, ì£¼ë¬¸ ì •ë³´ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•©ë‹ˆë‹¤

-ì£¼ë¬¸ ì •ë³´ì— ë”°ë¼ ë©”ë‰´ ëª©ë¡ì˜ ì¬ê³ ë„ ìˆ˜ì •í•©ë‹ˆë‹¤.

-ì£¼ë¬¸ IDë¥¼ ì „ë‹¬í•˜ë©´ í•´ë‹¹ ì£¼ë¬¸ ì •ë³´ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.

---

**Cursor**

Docs/PRD_Up1.md íŒŒì¼ì„ ë¨¼ì € í™•ì¸í•˜ê³  ë°±ì—”ë“œ PRDë¥¼ ì‘ì„±í•˜ê² ìŠµë‹ˆë‹¤.

Docs/PRD_Up1.md íŒŒì¼ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤. ì´ì œ ë°±ì—”ë“œ ê°œë°œì„ ìœ„í•œ PRDë¥¼ ì‘ì„±í•˜ê² ìŠµë‹ˆë‹¤.

```markdown
# OrderBean Backend - Product Requirements Document (PRD)

**ë²„ì „**: 1.0  
**ì‘ì„±ì¼**: 2025ë…„ 11ì›” 2ì¼  
**ì‘ì„±ì**: kznetwork  
**í”„ë¡œì íŠ¸ íƒ€ì…**: Toy Project / Portfolio - Backend Development

---

## ğŸ“‘ ëª©ì°¨

1. [ê°œìš”](#1-ê°œìš”)
2. [ë°ì´í„° ëª¨ë¸](#2-ë°ì´í„°-ëª¨ë¸)
3. [API ì„¤ê³„](#3-api-ì„¤ê³„)
4. [ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§](#4-ë¹„ì¦ˆë‹ˆìŠ¤-ë¡œì§)
5. [ê¸°ìˆ  ìŠ¤íƒ](#5-ê¸°ìˆ -ìŠ¤íƒ)
6. [ê°œë°œ ë¡œë“œë§µ](#6-ê°œë°œ-ë¡œë“œë§µ)

---

## 1. ê°œìš”

### 1.1 ë°±ì—”ë“œ ê°œë°œ ëª©ì 

OrderBean ë°±ì—”ë“œëŠ” ì»¤í”¼ ì£¼ë¬¸ ê´€ë¦¬ ì‹œìŠ¤í…œì˜ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë°ì´í„° ì²˜ë¦¬ë¥¼ ë‹´ë‹¹í•©ë‹ˆë‹¤. RESTful APIë¥¼ í†µí•´ í”„ë¡ íŠ¸ì—”ë“œì— ë°ì´í„°ë¥¼ ì œê³µí•˜ê³ , ì£¼ë¬¸ ë° ì¬ê³  ê´€ë¦¬ ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤.

### 1.2 í•µì‹¬ ê¸°ëŠ¥

- ë©”ë‰´ ì •ë³´ ê´€ë¦¬ ë° ì œê³µ
- ì£¼ë¬¸ ì²˜ë¦¬ ë° ìƒíƒœ ê´€ë¦¬
- ì¬ê³  ê´€ë¦¬
- ì˜µì…˜ ê´€ë¦¬
- ê´€ë¦¬ì ê¸°ëŠ¥ ì œê³µ

### 1.3 ë°±ì—”ë“œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Frontend (React)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ HTTP/REST API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         API Layer (FastAPI)             â”‚
â”‚  - Routes/Controllers                   â”‚
â”‚  - Request/Response Validation          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Business Logic Layer               â”‚
â”‚  - ì£¼ë¬¸ ì²˜ë¦¬ ë¡œì§                        â”‚
â”‚  - ì¬ê³  ê´€ë¦¬ ë¡œì§                        â”‚
â”‚  - ìƒíƒœ ë³€ê²½ ë¡œì§                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Data Access Layer (ORM)            â”‚
â”‚  - SQLAlchemy Models                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Database (PostgreSQL)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ë°ì´í„° ëª¨ë¸

### 2.1 ERD (Entity Relationship Diagram)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Menus     â”‚         â”‚   Orders    â”‚         â”‚   Options   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)     â”‚â—„â”€â”€â”€â”    â”‚ id (PK)     â”‚    â”Œâ”€â”€â”€â”‚ id (PK)     â”‚
â”‚ name        â”‚    â”‚    â”‚ order_numberâ”‚    â”‚   â”‚ name        â”‚
â”‚ description â”‚    â”‚    â”‚ status      â”‚    â”‚   â”‚ price       â”‚
â”‚ price       â”‚    â”‚    â”‚ total_amountâ”‚    â”‚   â”‚ menu_id(FK) â”‚
â”‚ image_url   â”‚    â”‚    â”‚ created_at  â”‚    â”‚   â”‚ created_at  â”‚
â”‚ stock       â”‚    â”‚    â”‚ updated_at  â”‚    â”‚   â”‚ updated_at  â”‚
â”‚ created_at  â”‚    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ updated_at  â”‚    â”‚            â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚            â”‚          â”‚
                   â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚    â”‚                  â”‚          â”‚
                   â”‚    â–¼                  â–¼          â”‚
                   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                   â”‚ â”‚   OrderItems                â”‚  â”‚
                   â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
                   â””â–ºâ”‚ id (PK)                     â”‚  â”‚
                     â”‚ order_id (FK)               â”‚  â”‚
                     â”‚ menu_id (FK)                â”‚â—„â”€â”˜
                     â”‚ quantity                    â”‚
                     â”‚ unit_price                  â”‚
                     â”‚ subtotal                    â”‚
                     â”‚ selected_options (JSON)     â”‚
                     â”‚ created_at                  â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2.2 í…Œì´ë¸” ìƒì„¸ ì •ì˜

#### â˜• Menus (ë©”ë‰´)

| ì»¬ëŸ¼ëª… | ë°ì´í„° íƒ€ì… | ì œì•½ì¡°ê±´ | ì„¤ëª… |
|--------|------------|---------|------|
| id | INT | PK, AUTO_INCREMENT | ë©”ë‰´ ê³ ìœ  ID |
| name | VARCHAR(100) | NOT NULL, UNIQUE | ì»¤í”¼ ì´ë¦„ |
| description | TEXT | NULL | ë©”ë‰´ ì„¤ëª… |
| price | DECIMAL(10,2) | NOT NULL | ê¸°ë³¸ ê°€ê²© |
| image_url | VARCHAR(500) | NULL | ì´ë¯¸ì§€ URL |
| stock | INT | NOT NULL, DEFAULT 0 | ì¬ê³  ìˆ˜ëŸ‰ |
| is_available | BOOLEAN | DEFAULT TRUE | íŒë§¤ ê°€ëŠ¥ ì—¬ë¶€ |
| created_at | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | ìƒì„±ì¼ì‹œ |
| updated_at | TIMESTAMP | ON UPDATE CURRENT_TIMESTAMP | ìˆ˜ì •ì¼ì‹œ |

**ì¸ë±ìŠ¤**
- PRIMARY KEY: id
- UNIQUE INDEX: name
- INDEX: is_available

**ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™**
- `stock`ì´ 0ì´ë©´ ìë™ìœ¼ë¡œ `is_available = FALSE`ë¡œ ë³€ê²½
- ì£¼ë¬¸ ì‹œ `stock` ê°ì†Œ
- ìŒìˆ˜ ì¬ê³  ë¶ˆê°€ (ì¬ê³  ë¶€ì¡± ì‹œ ì£¼ë¬¸ ê±°ë¶€)

---

#### ğŸ¨ Options (ì˜µì…˜)

| ì»¬ëŸ¼ëª… | ë°ì´í„° íƒ€ì… | ì œì•½ì¡°ê±´ | ì„¤ëª… |
|--------|------------|---------|------|
| id | INT | PK, AUTO_INCREMENT | ì˜µì…˜ ê³ ìœ  ID |
| menu_id | INT | FK, NOT NULL | ì—°ê²°ëœ ë©”ë‰´ ID |
| name | VARCHAR(100) | NOT NULL | ì˜µì…˜ ì´ë¦„ (ì˜ˆ: "ìƒ· ì¶”ê°€", "ì‚¬ì´ì¦ˆ ì—…") |
| price | DECIMAL(10,2) | NOT NULL, DEFAULT 0 | ì˜µì…˜ ì¶”ê°€ ê°€ê²© |
| option_type | VARCHAR(50) | NOT NULL | ì˜µì…˜ ìœ í˜• (size, shot, syrup, ice, etc.) |
| created_at | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | ìƒì„±ì¼ì‹œ |
| updated_at | TIMESTAMP | ON UPDATE CURRENT_TIMESTAMP | ìˆ˜ì •ì¼ì‹œ |

**ì¸ë±ìŠ¤**
- PRIMARY KEY: id
- INDEX: menu_id
- INDEX: option_type

**ì˜µì…˜ ìœ í˜•**
- `size`: ì‚¬ì´ì¦ˆ (Tall, Grande, Venti)
- `shot`: ìƒ· ì¶”ê°€
- `syrup`: ì‹œëŸ½ ì¶”ê°€ (ë°”ë‹ë¼, ì¹´ë¼ë©œ ë“±)
- `ice`: ì–¼ìŒ ì¡°ì ˆ (ë§ì´, ë³´í†µ, ì ê²Œ, ì—†ìŒ)
- `whipped`: íœ˜í•‘í¬ë¦¼ ì¶”ê°€/ì œê±°

**ì˜ˆì‹œ ë°ì´í„°**
```sql
-- ì•„ë©”ë¦¬ì¹´ë…¸ (menu_id = 1) ì˜µì…˜
INSERT INTO options (menu_id, name, price, option_type) VALUES
(1, 'Tall', 0, 'size'),
(1, 'Grande', 500, 'size'),
(1, 'Venti', 1000, 'size'),
(1, 'ìƒ· ì¶”ê°€', 500, 'shot'),
(1, 'ì–¼ìŒ ì ê²Œ', 0, 'ice'),
(1, 'ë°”ë‹ë¼ ì‹œëŸ½', 500, 'syrup');
```

---

#### ğŸ“¦ Orders (ì£¼ë¬¸)

| ì»¬ëŸ¼ëª… | ë°ì´í„° íƒ€ì… | ì œì•½ì¡°ê±´ | ì„¤ëª… |
|--------|------------|---------|------|
| id | INT | PK, AUTO_INCREMENT | ì£¼ë¬¸ ê³ ìœ  ID |
| order_number | VARCHAR(50) | UNIQUE, NOT NULL | ì£¼ë¬¸ ë²ˆí˜¸ (ORD-YYYYMMDD-XXX) |
| status | ENUM | NOT NULL | ì£¼ë¬¸ ìƒíƒœ |
| total_amount | DECIMAL(10,2) | NOT NULL | ì´ ì£¼ë¬¸ ê¸ˆì•¡ |
| special_request | TEXT | NULL | íŠ¹ë³„ ìš”ì²­ì‚¬í•­ |
| created_at | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | ì£¼ë¬¸ ì¼ì‹œ |
| updated_at | TIMESTAMP | ON UPDATE CURRENT_TIMESTAMP | ìˆ˜ì •ì¼ì‹œ |

**status ENUM ê°’**
- `pending`: ì£¼ë¬¸ ì ‘ìˆ˜ (ê¸°ë³¸ê°’)
- `preparing`: ì œì¡° ì¤‘
- `completed`: ì™„ë£Œ
- `cancelled`: ì·¨ì†Œë¨

**ì£¼ë¬¸ ë²ˆí˜¸ ìƒì„± ê·œì¹™**
```python
# í˜•ì‹: ORD-YYYYMMDD-XXX
# ì˜ˆì‹œ: ORD-20251102-001, ORD-20251102-002
order_number = f"ORD-{datetime.now().strftime('%Y%m%d')}-{sequence:03d}"
```

**ì¸ë±ìŠ¤**
- PRIMARY KEY: id
- UNIQUE INDEX: order_number
- INDEX: status
- INDEX: created_at

**ìƒíƒœ ì „ì´ ê·œì¹™**
```
pending â†’ preparing â†’ completed
   â†“
cancelled (ì·¨ì†ŒëŠ” pending ìƒíƒœì—ì„œë§Œ ê°€ëŠ¥)
```

---

#### ğŸ›’ OrderItems (ì£¼ë¬¸ ìƒì„¸)

| ì»¬ëŸ¼ëª… | ë°ì´í„° íƒ€ì… | ì œì•½ì¡°ê±´ | ì„¤ëª… |
|--------|------------|---------|------|
| id | INT | PK, AUTO_INCREMENT | ì£¼ë¬¸ ì•„ì´í…œ ID |
| order_id | INT | FK, NOT NULL | ì£¼ë¬¸ ID |
| menu_id | INT | FK, NOT NULL | ë©”ë‰´ ID |
| quantity | INT | NOT NULL | ìˆ˜ëŸ‰ |
| unit_price | DECIMAL(10,2) | NOT NULL | ê°œë‹¹ ê°€ê²© (ì˜µì…˜ í¬í•¨) |
| subtotal | DECIMAL(10,2) | NOT NULL | ì†Œê³„ (unit_price * quantity) |
| selected_options | JSON | NULL | ì„ íƒëœ ì˜µì…˜ ì •ë³´ |
| created_at | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | ìƒì„±ì¼ì‹œ |

**selected_options JSON êµ¬ì¡°**
```json
{
  "size": {
    "id": 2,
    "name": "Grande",
    "price": 500
  },
  "extras": [
    {
      "id": 4,
      "name": "ìƒ· ì¶”ê°€",
      "price": 500,
      "option_type": "shot"
    },
    {
      "id": 6,
      "name": "ë°”ë‹ë¼ ì‹œëŸ½",
      "price": 500,
      "option_type": "syrup"
    }
  ],
  "ice": {
    "id": 5,
    "name": "ì–¼ìŒ ì ê²Œ",
    "price": 0
  }
}
```

**ê°€ê²© ê³„ì‚° ë¡œì§**
```python
# unit_price = ë©”ë‰´ ê¸°ë³¸ ê°€ê²© + ëª¨ë“  ì˜µì…˜ ê°€ê²©ì˜ í•©
unit_price = menu.price + sum(option.price for option in selected_options)

# subtotal = unit_price * quantity
subtotal = unit_price * quantity
```

**ì¸ë±ìŠ¤**
- PRIMARY KEY: id
- INDEX: order_id
- INDEX: menu_id

---

### 2.3 ê´€ê³„ ì •ì˜

1. **Menus â†” Options**: 1:N (í•œ ë©”ë‰´ëŠ” ì—¬ëŸ¬ ì˜µì…˜ ê°€ëŠ¥)
2. **Orders â†” OrderItems**: 1:N (í•œ ì£¼ë¬¸ì€ ì—¬ëŸ¬ ë©”ë‰´ ì•„ì´í…œ í¬í•¨)
3. **Menus â†” OrderItems**: 1:N (í•œ ë©”ë‰´ëŠ” ì—¬ëŸ¬ ì£¼ë¬¸ì— í¬í•¨ ê°€ëŠ¥)

---

### 2.4 ë°ì´í„°ë² ì´ìŠ¤ ì œì•½ì¡°ê±´

```sql
-- Foreign Key Constraints
ALTER TABLE options
ADD CONSTRAINT fk_options_menu
FOREIGN KEY (menu_id) REFERENCES menus(id)
ON DELETE CASCADE;

ALTER TABLE order_items
ADD CONSTRAINT fk_order_items_order
FOREIGN KEY (order_id) REFERENCES orders(id)
ON DELETE CASCADE;

ALTER TABLE order_items
ADD CONSTRAINT fk_order_items_menu
FOREIGN KEY (menu_id) REFERENCES menus(id)
ON DELETE RESTRICT;

-- Check Constraints
ALTER TABLE menus
ADD CONSTRAINT chk_menus_price CHECK (price >= 0);

ALTER TABLE menus
ADD CONSTRAINT chk_menus_stock CHECK (stock >= 0);

ALTER TABLE options
ADD CONSTRAINT chk_options_price CHECK (price >= 0);

ALTER TABLE orders
ADD CONSTRAINT chk_orders_total CHECK (total_amount > 0);

ALTER TABLE order_items
ADD CONSTRAINT chk_order_items_quantity CHECK (quantity > 0);

ALTER TABLE order_items
ADD CONSTRAINT chk_order_items_price CHECK (unit_price >= 0);
```

---

## 3. API ì„¤ê³„

### 3.1 API ì„¤ê³„ ì›ì¹™

- **RESTful API** í‘œì¤€ ì¤€ìˆ˜
- **JSON** í˜•ì‹ ì‚¬ìš©
- **HTTP ìƒíƒœ ì½”ë“œ** ëª…í™•íˆ ì‚¬ìš©
- **API ë²„ì „ ê´€ë¦¬**: `/api/v1/`
- **ì—ëŸ¬ ì‘ë‹µ ì¼ê´€ì„±**
- **FastAPI** ê¸°ë°˜ ìë™ ë¬¸ì„œ ìƒì„± (Swagger/ReDoc)

---

### 3.2 ë©”ë‰´ API

#### ğŸ“Œ GET /api/v1/menus

**ì„¤ëª…**: ë©”ë‰´ ëª©ë¡ ì¡°íšŒ

**ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°**
- `available` (optional, boolean): íŒë§¤ ê°€ëŠ¥í•œ ë©”ë‰´ë§Œ í•„í„°ë§

**ìš”ì²­ ì˜ˆì‹œ**
```http
GET /api/v1/menus?available=true
```

**ì‘ë‹µ (200 OK)**
```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "ì•„ë©”ë¦¬ì¹´ë…¸",
      "description": "ì§„í•œ ì—ìŠ¤í”„ë ˆì†Œì™€ ë¬¼",
      "price": 4500,
      "imageUrl": "/images/americano.jpg",
      "stock": 50,
      "isAvailable": true,
      "options": [
        {
          "id": 1,
          "name": "Tall",
          "price": 0,
          "optionType": "size"
        },
        {
          "id": 2,
          "name": "Grande",
          "price": 500,
          "optionType": "size"
        },
        {
          "id": 4,
          "name": "ìƒ· ì¶”ê°€",
          "price": 500,
          "optionType": "shot"
        }
      ]
    },
    {
      "id": 2,
      "name": "ì¹´í˜ë¼ë–¼",
      "description": "ë¶€ë“œëŸ¬ìš´ ìš°ìœ ì™€ ì—ìŠ¤í”„ë ˆì†Œ",
      "price": 5000,
      "imageUrl": "/images/latte.jpg",
      "stock": 35,
      "isAvailable": true,
      "options": [...]
    }
  ]
}
```

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**
1. ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë©”ë‰´ ëª©ë¡ ì¡°íšŒ
2. `available=true`ì¸ ê²½ìš° `is_available=TRUE`ì¸ ë©”ë‰´ë§Œ í•„í„°ë§
3. ê° ë©”ë‰´ì— ì—°ê²°ëœ ì˜µì…˜ ëª©ë¡ë„ í•¨ê»˜ ì¡°íšŒ (JOIN)
4. ê´€ë¦¬ì ê¶Œí•œì´ ì•„ë‹Œ ê²½ìš° `stock` ì •ë³´ ìˆ¨ê¹€ ì²˜ë¦¬

---

#### ğŸ“Œ GET /api/v1/menus/:id

**ì„¤ëª…**: ë©”ë‰´ ìƒì„¸ ì¡°íšŒ

**ìš”ì²­ ì˜ˆì‹œ**
```http
GET /api/v1/menus/1
```

**ì‘ë‹µ (200 OK)**
```json
{
  "success": true,
  "data": {
    "id": 1,
    "name": "ì•„ë©”ë¦¬ì¹´ë…¸",
    "description": "ì§„í•œ ì—ìŠ¤í”„ë ˆì†Œì™€ ë¬¼",
    "price": 4500,
    "imageUrl": "/images/americano.jpg",
    "stock": 50,
    "isAvailable": true,
    "options": [
      {
        "id": 1,
        "name": "Tall",
        "price": 0,
        "optionType": "size"
      },
      {
        "id": 2,
        "name": "Grande",
        "price": 500,
        "optionType": "size"
      }
    ]
  }
}
```

**ì—ëŸ¬ ì‘ë‹µ (404 Not Found)**
```json
{
  "success": false,
  "error": {
    "code": "MENU_NOT_FOUND",
    "message": "ë©”ë‰´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
  }
}
```

---

#### ğŸ“Œ POST /api/v1/menus (ê´€ë¦¬ì ì „ìš©)

**ì„¤ëª…**: ë©”ë‰´ ë“±ë¡

**ìš”ì²­ í—¤ë”**
```
Authorization: Bearer {admin_token}
```

**ìš”ì²­ Body**
```json
{
  "name": "ì½œë“œë¸Œë£¨",
  "description": "12ì‹œê°„ ì €ì˜¨ ì¶”ì¶œ",
  "price": 5500,
  "imageUrl": "/images/coldbrew.jpg",
  "stock": 30
}
```

**ì‘ë‹µ (201 Created)**
```json
{
  "success": true,
  "message": "ë©”ë‰´ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.",
  "data": {
    "id": 10,
    "name": "ì½œë“œë¸Œë£¨",
    "price": 5500,
    "stock": 30
  }
}
```

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**
1. ê´€ë¦¬ì ê¶Œí•œ í™•ì¸
2. ë©”ë‰´ëª… ì¤‘ë³µ ì²´í¬
3. ê°€ê²©, ì¬ê³  ìœ íš¨ì„± ê²€ì¦
4. ë°ì´í„°ë² ì´ìŠ¤ì— ë©”ë‰´ ìƒì„±
5. ìƒì„±ëœ ë©”ë‰´ ì •ë³´ ë°˜í™˜

---

#### ğŸ“Œ PATCH /api/v1/menus/:id/stock (ê´€ë¦¬ì ì „ìš©)

**ì„¤ëª…**: ë©”ë‰´ ì¬ê³  ìˆ˜ì •

**ìš”ì²­ Body**
```json
{
  "stock": 20
}
```

**ì‘ë‹µ (200 OK)**
```json
{
  "success": true,
  "message": "ì¬ê³ ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.",
  "data": {
    "id": 1,
    "name": "ì•„ë©”ë¦¬ì¹´ë…¸",
    "stock": 20,
    "isAvailable": true
  }
}
```

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**
1. ê´€ë¦¬ì ê¶Œí•œ í™•ì¸
2. ë©”ë‰´ ì¡´ì¬ ì—¬ë¶€ í™•ì¸
3. ì¬ê³  ìœ íš¨ì„± ê²€ì¦ (ìŒìˆ˜ ë¶ˆê°€)
4. ì¬ê³  ì—…ë°ì´íŠ¸
5. ì¬ê³ ê°€ 0ì¸ ê²½ìš° `is_available = FALSE` ìë™ ì„¤ì •

---

### 3.3 ì£¼ë¬¸ API

#### ğŸ“Œ POST /api/v1/orders

**ì„¤ëª…**: ì£¼ë¬¸ ìƒì„±

**ìš”ì²­ Body**
```json
{
  "items": [
    {
      "menuId": 1,
      "quantity": 2,
      "selectedOptions": [
        {
          "id": 2,
          "name": "Grande",
          "price": 500,
          "optionType": "size"
        },
        {
          "id": 4,
          "name": "ìƒ· ì¶”ê°€",
          "price": 500,
          "optionType": "shot"
        }
      ]
    },
    {
      "menuId": 5,
      "quantity": 1,
      "selectedOptions": []
    }
  ],
  "specialRequest": "ë¹¨ëŒ€ 2ê°œ ì£¼ì„¸ìš”"
}
```

**ì‘ë‹µ (201 Created)**
```json
{
  "success": true,
  "message": "ì£¼ë¬¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",
  "data": {
    "orderId": 42,
    "orderNumber": "ORD-20251102-042",
    "status": "pending",
    "totalAmount": 15000,
    "items": [
      {
        "menuName": "ì•„ë©”ë¦¬ì¹´ë…¸",
        "quantity": 2,
        "unitPrice": 5500,
        "subtotal": 11000,
        "options": [
          {
            "name": "Grande",
            "price": 500
          },
          {
            "name": "ìƒ· ì¶”ê°€",
            "price": 500
          }
        ]
      },
      {
        "menuName": "í¬ë£¨ì•„ìƒ",
        "quantity": 1,
        "unitPrice": 4000,
        "subtotal": 4000,
        "options": []
      }
    ],
    "createdAt": "2025-11-02T09:30:00Z"
  }
}
```

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**
1. **ë°ì´í„° ìœ íš¨ì„± ê²€ì¦**
   - ëª¨ë“  ë©”ë‰´ IDê°€ ìœ íš¨í•œì§€ í™•ì¸
   - ëª¨ë“  ì˜µì…˜ IDê°€ í•´ë‹¹ ë©”ë‰´ì— ì†í•˜ëŠ”ì§€ í™•ì¸
   - ìˆ˜ëŸ‰ì´ ì–‘ìˆ˜ì¸ì§€ í™•ì¸

2. **ì¬ê³  í™•ì¸**
   ```python
   for item in items:
       menu = get_menu(item.menu_id)
       if menu.stock < item.quantity:
           raise InsufficientStockError(f"{menu.name} ì¬ê³ ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.")
   ```

3. **ê°€ê²© ê³„ì‚°**
   ```python
   for item in items:
       menu = get_menu(item.menu_id)
       option_total = sum(option.price for option in item.selected_options)
       item.unit_price = menu.price + option_total
       item.subtotal = item.unit_price * item.quantity
   
   order.total_amount = sum(item.subtotal for item in items)
   ```

4. **íŠ¸ëœì­ì…˜ ì²˜ë¦¬**
   ```python
   with db.transaction():
       # 1. ì£¼ë¬¸ ìƒì„±
       order = create_order(status='pending', total_amount=total)
       
       # 2. ì£¼ë¬¸ ì•„ì´í…œ ìƒì„±
       for item in items:
           create_order_item(order_id=order.id, ...)
       
       # 3. ì¬ê³  ê°ì†Œ
       for item in items:
           decrease_stock(menu_id=item.menu_id, quantity=item.quantity)
       
       # 4. ì¬ê³ ê°€ 0ì´ë©´ is_available = Falseë¡œ ì„¤ì •
       for item in items:
           menu = get_menu(item.menu_id)
           if menu.stock == 0:
               update_menu(menu.id, is_available=False)
   ```

5. **ì£¼ë¬¸ ë²ˆí˜¸ ìƒì„±**
   ```python
   today = datetime.now().strftime('%Y%m%d')
   sequence = get_today_order_count() + 1
   order_number = f"ORD-{today}-{sequence:03d}"
   ```

**ì—ëŸ¬ ì‘ë‹µ (400 Bad Request)**
```json
{
  "success": false,
  "error": {
    "code": "INSUFFICIENT_STOCK",
    "message": "ì•„ë©”ë¦¬ì¹´ë…¸ì˜ ì¬ê³ ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤. (í˜„ì¬ ì¬ê³ : 1ê°œ)"
  }
}
```

---

#### ğŸ“Œ GET /api/v1/orders/:id

**ì„¤ëª…**: ì£¼ë¬¸ ìƒì„¸ ì¡°íšŒ

**ìš”ì²­ ì˜ˆì‹œ**
```http
GET /api/v1/orders/42
```

**ì‘ë‹µ (200 OK)**
```json
{
  "success": true,
  "data": {
    "id": 42,
    "orderNumber": "ORD-20251102-042",
    "status": "preparing",
    "totalAmount": 15000,
    "specialRequest": "ë¹¨ëŒ€ 2ê°œ ì£¼ì„¸ìš”",
    "createdAt": "2025-11-02T09:30:00Z",
    "updatedAt": "2025-11-02T09:35:00Z",
    "items": [
      {
        "id": 101,
        "menuName": "ì•„ë©”ë¦¬ì¹´ë…¸",
        "quantity": 2,
        "unitPrice": 5500,
        "subtotal": 11000,
        "selectedOptions": [
          {
            "name": "Grande",
            "price": 500,
            "optionType": "size"
          },
          {
            "name": "ìƒ· ì¶”ê°€",
            "price": 500,
            "optionType": "shot"
          }
        ]
      }
    ]
  }
}
```

**ì—ëŸ¬ ì‘ë‹µ (404 Not Found)**
```json
{
  "success": false,
  "error": {
    "code": "ORDER_NOT_FOUND",
    "message": "ì£¼ë¬¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
  }
}
```

---

### 3.4 ê´€ë¦¬ì ì£¼ë¬¸ ê´€ë¦¬ API

#### ğŸ“Œ GET /api/v1/admin/orders (ê´€ë¦¬ì ì „ìš©)

**ì„¤ëª…**: ì „ì²´ ì£¼ë¬¸ ëª©ë¡ ì¡°íšŒ

**ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°**
- `status` (optional): ì£¼ë¬¸ ìƒíƒœ í•„í„°ë§
- `date` (optional): íŠ¹ì • ë‚ ì§œì˜ ì£¼ë¬¸ë§Œ ì¡°íšŒ

**ìš”ì²­ ì˜ˆì‹œ**
```http
GET /api/v1/admin/orders?status=pending
```

**ì‘ë‹µ (200 OK)**
```json
{
  "success": true,
  "data": {
    "summary": {
      "pending": 8,
      "preparing": 3,
      "completed": 45,
      "todayRevenue": 337500
    },
    "orders": [
      {
        "id": 42,
        "orderNumber": "ORD-20251102-042",
        "status": "pending",
        "totalAmount": 15000,
        "itemCount": 2,
        "specialRequest": "ë¹¨ëŒ€ 2ê°œ ì£¼ì„¸ìš”",
        "createdAt": "2025-11-02T09:30:00Z"
      },
      {
        "id": 41,
        "orderNumber": "ORD-20251102-041",
        "status": "pending",
        "totalAmount": 9000,
        "itemCount": 1,
        "specialRequest": null,
        "createdAt": "2025-11-02T09:25:00Z"
      }
    ]
  }
}
```

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**
1. ê´€ë¦¬ì ê¶Œí•œ í™•ì¸
2. ìƒíƒœë³„ ì£¼ë¬¸ í†µê³„ ê³„ì‚°
3. ë‹¹ì¼ ë§¤ì¶œ ê³„ì‚°
4. ì£¼ë¬¸ ëª©ë¡ ì¡°íšŒ (ìµœì‹ ìˆœ)
5. ìƒíƒœ í•„í„° ì ìš© (ìˆëŠ” ê²½ìš°)

---

#### ğŸ“Œ PATCH /api/v1/admin/orders/:id/status (ê´€ë¦¬ì ì „ìš©)

**ì„¤ëª…**: ì£¼ë¬¸ ìƒíƒœ ë³€ê²½

**ìš”ì²­ Body**
```json
{
  "status": "preparing"
}
```

**ì‘ë‹µ (200 OK)**
```json
{
  "success": true,
  "message": "ì£¼ë¬¸ ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.",
  "data": {
    "orderId": 42,
    "orderNumber": "ORD-20251102-042",
    "status": "preparing",
    "updatedAt": "2025-11-02T09:32:00Z"
  }
}
```

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**
1. ê´€ë¦¬ì ê¶Œí•œ í™•ì¸
2. ì£¼ë¬¸ ì¡´ì¬ ì—¬ë¶€ í™•ì¸
3. ìƒíƒœ ì „ì´ ê·œì¹™ ê²€ì¦
   ```python
   # í—ˆìš©ëœ ìƒíƒœ ì „ì´
   ALLOWED_TRANSITIONS = {
       'pending': ['preparing', 'cancelled'],
       'preparing': ['completed'],
       'completed': [],  # ì™„ë£Œ ìƒíƒœì—ì„œëŠ” ë³€ê²½ ë¶ˆê°€
       'cancelled': []   # ì·¨ì†Œ ìƒíƒœì—ì„œëŠ” ë³€ê²½ ë¶ˆê°€
   }
   
   if new_status not in ALLOWED_TRANSITIONS[current_status]:
       raise InvalidStatusTransitionError()
   ```
4. ì£¼ë¬¸ ìƒíƒœ ì—…ë°ì´íŠ¸
5. `updated_at` ìë™ ê°±ì‹ 

**ì—ëŸ¬ ì‘ë‹µ (400 Bad Request)**
```json
{
  "success": false,
  "error": {
    "code": "INVALID_STATUS_TRANSITION",
    "message": "ì™„ë£Œëœ ì£¼ë¬¸ì€ ìƒíƒœë¥¼ ë³€ê²½í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
  }
}
```

---

#### ğŸ“Œ GET /api/v1/admin/menus/stock (ê´€ë¦¬ì ì „ìš©)

**ì„¤ëª…**: ì „ì²´ ë©”ë‰´ì˜ ì¬ê³  í˜„í™© ì¡°íšŒ

**ì‘ë‹µ (200 OK)**
```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "ì•„ë©”ë¦¬ì¹´ë…¸",
      "stock": 50,
      "isAvailable": true,
      "lowStock": false
    },
    {
      "id": 2,
      "name": "ì¹´í˜ë¼ë–¼",
      "stock": 5,
      "isAvailable": true,
      "lowStock": true
    },
    {
      "id": 3,
      "name": "ì½œë“œë¸Œë£¨",
      "stock": 0,
      "isAvailable": false,
      "lowStock": true
    }
  ]
}
```

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**
1. ê´€ë¦¬ì ê¶Œí•œ í™•ì¸
2. ëª¨ë“  ë©”ë‰´ì˜ ì¬ê³  ì •ë³´ ì¡°íšŒ
3. ì¬ê³  10ê°œ ì´í•˜ë©´ `lowStock: true` í”Œë˜ê·¸ ì¶”ê°€
4. ì¬ê³  0ê°œë©´ `isAvailable: false` ìë™ ì„¤ì •

---

### 3.5 ì—ëŸ¬ ì‘ë‹µ í‘œì¤€ í˜•ì‹

ëª¨ë“  ì—ëŸ¬ëŠ” ë‹¤ìŒ í˜•ì‹ì„ ë”°ë¦…ë‹ˆë‹¤:

```json
{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "ì‚¬ìš©ì ì¹œí™”ì  ì—ëŸ¬ ë©”ì‹œì§€",
    "details": {}
  }
}
```

**ì£¼ìš” HTTP ìƒíƒœ ì½”ë“œ**
- `200 OK`: ì„±ê³µ
- `201 Created`: ìƒì„± ì„±ê³µ
- `400 Bad Request`: ì˜ëª»ëœ ìš”ì²­
- `401 Unauthorized`: ì¸ì¦ í•„ìš”
- `403 Forbidden`: ê¶Œí•œ ì—†ìŒ (ê´€ë¦¬ì ê¸°ëŠ¥)
- `404 Not Found`: ë¦¬ì†ŒìŠ¤ ì—†ìŒ
- `409 Conflict`: ì¬ê³  ë¶€ì¡±, ì¤‘ë³µ ë°ì´í„° ë“±
- `500 Internal Server Error`: ì„œë²„ ì˜¤ë¥˜

**ì£¼ìš” ì—ëŸ¬ ì½”ë“œ**
- `MENU_NOT_FOUND`: ë©”ë‰´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
- `ORDER_NOT_FOUND`: ì£¼ë¬¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ
- `INSUFFICIENT_STOCK`: ì¬ê³  ë¶€ì¡±
- `INVALID_STATUS_TRANSITION`: ì˜ëª»ëœ ìƒíƒœ ì „ì´
- `UNAUTHORIZED`: ì¸ì¦ í•„ìš”
- `FORBIDDEN`: ê´€ë¦¬ì ê¶Œí•œ í•„ìš”
- `VALIDATION_ERROR`: ì…ë ¥ ë°ì´í„° ê²€ì¦ ì‹¤íŒ¨

---

## 4. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§

### 4.1 ì‚¬ìš©ì íë¦„ ë° ë°±ì—”ë“œ ì²˜ë¦¬

#### ğŸ”„ íë¦„ 1: ë©”ë‰´ í‘œì‹œ

**í”„ë¡ íŠ¸ì—”ë“œ**
1. ì‚¬ìš©ìê°€ ë©”ë‰´ í˜ì´ì§€ ì ‘ì†
2. `GET /api/v1/menus?available=true` í˜¸ì¶œ

**ë°±ì—”ë“œ ì²˜ë¦¬**
```python
async def get_menus(available: bool = None):
    query = select(Menu).options(selectinload(Menu.options))
    
    if available:
        query = query.where(Menu.is_available == True)
    
    result = await db.execute(query)
    menus = result.scalars().all()
    
    return {
        "success": True,
        "data": [menu.to_dict() for menu in menus]
    }
```

**ê´€ë¦¬ì í™”ë©´**
- ê´€ë¦¬ìëŠ” `GET /api/v1/admin/menus/stock` í˜¸ì¶œí•˜ì—¬ ì¬ê³  í¬í•¨ ì •ë³´ ì¡°íšŒ

---

#### ğŸ”„ íë¦„ 2: ì¥ë°”êµ¬ë‹ˆì— ë©”ë‰´ ì¶”ê°€

**í”„ë¡ íŠ¸ì—”ë“œ**
1. ì‚¬ìš©ìê°€ ë©”ë‰´ ì„ íƒ
2. ì˜µì…˜ ì„ íƒ
3. ì¥ë°”êµ¬ë‹ˆ ìƒíƒœ ê´€ë¦¬ (í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì²˜ë¦¬)

**ë°±ì—”ë“œ ì²˜ë¦¬**
- ì´ ë‹¨ê³„ì—ì„œëŠ” ë°±ì—”ë“œ í˜¸ì¶œ ì—†ìŒ
- ì¥ë°”êµ¬ë‹ˆëŠ” í”„ë¡ íŠ¸ì—”ë“œ ìƒíƒœ ê´€ë¦¬ (Zustand/Redux)

---

#### ğŸ”„ íë¦„ 3: ì£¼ë¬¸í•˜ê¸°

**í”„ë¡ íŠ¸ì—”ë“œ**
1. ì‚¬ìš©ìê°€ ì¥ë°”êµ¬ë‹ˆì—ì„œ "ì£¼ë¬¸í•˜ê¸°" ë²„íŠ¼ í´ë¦­
2. `POST /api/v1/orders` í˜¸ì¶œ

**ë°±ì—”ë“œ ì²˜ë¦¬ í”Œë¡œìš°**
```python
async def create_order(order_data: OrderCreate):
    async with db.begin():  # íŠ¸ëœì­ì…˜ ì‹œì‘
        try:
            # 1. ë©”ë‰´ ë° ì˜µì…˜ ê²€ì¦
            for item in order_data.items:
                menu = await validate_menu(item.menu_id)
                await validate_options(item.menu_id, item.selected_options)
            
            # 2. ì¬ê³  í™•ì¸
            for item in order_data.items:
                if not await check_stock(item.menu_id, item.quantity):
                    raise InsufficientStockError(f"{menu.name} ì¬ê³  ë¶€ì¡±")
            
            # 3. ê°€ê²© ê³„ì‚°
            total_amount = 0
            order_items_data = []
            
            for item in order_data.items:
                menu = await get_menu(item.menu_id)
                
                # ì˜µì…˜ ê°€ê²© í•©ì‚°
                option_total = sum(opt.price for opt in item.selected_options)
                unit_price = menu.price + option_total
                subtotal = unit_price * item.quantity
                
                total_amount += subtotal
                
                order_items_data.append({
                    "menu_id": item.menu_id,
                    "quantity": item.quantity,
                    "unit_price": unit_price,
                    "subtotal": subtotal,
                    "selected_options": item.selected_options
                })
            
            # 4. ì£¼ë¬¸ ë²ˆí˜¸ ìƒì„±
            order_number = await generate_order_number()
            
            # 5. ì£¼ë¬¸ ìƒì„±
            order = Order(
                order_number=order_number,
                status="pending",
                total_amount=total_amount,
                special_request=order_data.special_request
            )
            db.add(order)
            await db.flush()  # order.id ìƒì„±
            
            # 6. ì£¼ë¬¸ ì•„ì´í…œ ìƒì„±
            for item_data in order_items_data:
                order_item = OrderItem(
                    order_id=order.id,
                    **item_data
                )
                db.add(order_item)
            
            # 7. ì¬ê³  ê°ì†Œ
            for item in order_data.items:
                await decrease_stock(item.menu_id, item.quantity)
            
            # 8. ì¬ê³  0ì´ë©´ íŒë§¤ ì¤‘ì§€
            for item in order_data.items:
                menu = await get_menu(item.menu_id)
                if menu.stock == 0:
                    menu.is_available = False
            
            await db.commit()
            
            # 9. ì£¼ë¬¸ ì •ë³´ ë°˜í™˜
            return {
                "success": True,
                "message": "ì£¼ë¬¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",
                "data": await get_order_detail(order.id)
            }
            
        except Exception as e:
            await db.rollback()
            raise
```

---

#### ğŸ”„ íë¦„ 4: ì£¼ë¬¸ í˜„í™© ê´€ë¦¬

**í”„ë¡ íŠ¸ì—”ë“œ (ê´€ë¦¬ì)**
1. ê´€ë¦¬ìê°€ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ì ‘ì†
2. `GET /api/v1/admin/orders` í˜¸ì¶œ
3. ì‹¤ì‹œê°„ ì£¼ë¬¸ í˜„í™© í‘œì‹œ

**ë°±ì—”ë“œ ì²˜ë¦¬**
```python
async def get_admin_orders(status: str = None):
    # í†µê³„ ê³„ì‚°
    summary = await calculate_order_summary()
    
    # ì£¼ë¬¸ ëª©ë¡ ì¡°íšŒ
    query = select(Order).order_by(Order.created_at.desc())
    
    if status:
        query = query.where(Order.status == status)
    
    result = await db.execute(query)
    orders = result.scalars().all()
    
    return {
        "success": True,
        "data": {
            "summary": summary,
            "orders": [order.to_dict() for order in orders]
        }
    }

async def calculate_order_summary():
    today = datetime.now().date()
    
    # ìƒíƒœë³„ ì£¼ë¬¸ ìˆ˜
    pending_count = await count_orders_by_status("pending")
    preparing_count = await count_orders_by_status("preparing")
    completed_count = await count_orders_by_status("completed", today)
    
    # ë‹¹ì¼ ë§¤ì¶œ
    today_revenue = await calculate_revenue(today)
    
    return {
        "pending": pending_count,
        "preparing": preparing_count,
        "completed": completed_count,
        "todayRevenue": today_revenue
    }
```

**ì£¼ë¬¸ ìƒíƒœ ë³€ê²½**
```python
async def update_order_status(order_id: int, new_status: str):
    order = await get_order_or_404(order_id)
    
    # ìƒíƒœ ì „ì´ ê²€ì¦
    if not is_valid_transition(order.status, new_status):
        raise InvalidStatusTransitionError(
            f"'{order.status}'ì—ì„œ '{new_status}'ë¡œ ë³€ê²½í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
        )
    
    order.status = new_status
    await db.commit()
    
    return {
        "success": True,
        "message": "ì£¼ë¬¸ ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.",
        "data": order.to_dict()
    }

def is_valid_transition(current: str, new: str) -> bool:
    transitions = {
        "pending": ["preparing", "cancelled"],
        "preparing": ["completed"],
        "completed": [],
        "cancelled": []
    }
    return new in transitions.get(current, [])
```

---

### 4.2 ì¬ê³  ê´€ë¦¬ ë¡œì§

#### ì¬ê³  ê°ì†Œ

```python
async def decrease_stock(menu_id: int, quantity: int):
    """ì£¼ë¬¸ ì‹œ ì¬ê³  ê°ì†Œ"""
    menu = await get_menu_or_404(menu_id)
    
    if menu.stock < quantity:
        raise InsufficientStockError(
            f"{menu.name}ì˜ ì¬ê³ ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤. (í˜„ì¬ ì¬ê³ : {menu.stock}ê°œ)"
        )
    
    menu.stock -= quantity
    
    # ì¬ê³ ê°€ 0ì´ë©´ íŒë§¤ ì¤‘ì§€
    if menu.stock == 0:
        menu.is_available = False
    
    await db.commit()
```

#### ì¬ê³  ì¦ê°€ (ê´€ë¦¬ì)

```python
async def increase_stock(menu_id: int, quantity: int):
    """ê´€ë¦¬ìê°€ ì¬ê³  ì¶”ê°€"""
    menu = await get_menu_or_404(menu_id)
    
    menu.stock += quantity
    
    # ì¬ê³ ê°€ ì¶”ê°€ë˜ë©´ íŒë§¤ ì¬ê°œ
    if menu.stock > 0 and not menu.is_available:
        menu.is_available = True
    
    await db.commit()
    
    return menu
```

#### ì¬ê³  ì„¤ì • (ê´€ë¦¬ì)

```python
async def set_stock(menu_id: int, stock: int):
    """ê´€ë¦¬ìê°€ ì¬ê³  ì§ì ‘ ì„¤ì •"""
    if stock < 0:
        raise ValidationError("ì¬ê³ ëŠ” ìŒìˆ˜ì¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
    
    menu = await get_menu_or_404(menu_id)
    menu.stock = stock
    
    # ì¬ê³ ì— ë”°ë¼ íŒë§¤ ê°€ëŠ¥ ì—¬ë¶€ ì„¤ì •
    menu.is_available = (stock > 0)
    
    await db.commit()
    
    return menu
```

---

### 4.3 ì£¼ë¬¸ ë²ˆí˜¸ ìƒì„± ë¡œì§

```python
async def generate_order_number() -> str:
    """
    ì£¼ë¬¸ ë²ˆí˜¸ ìƒì„±: ORD-YYYYMMDD-XXX
    ì˜ˆì‹œ: ORD-20251102-001
    """
    today = datetime.now().strftime('%Y%m%d')
    
    # ë‹¹ì¼ ì£¼ë¬¸ ìˆ˜ ì¡°íšŒ
    today_start = datetime.now().replace(hour=0, minute=0, second=0)
    today_end = datetime.now().replace(hour=23, minute=59, second=59)
    
    query = select(func.count(Order.id)).where(
        Order.created_at >= today_start,
        Order.created_at <= today_end
    )
    result = await db.execute(query)
    count = result.scalar() or 0
    
    sequence = count + 1
    order_number = f"ORD-{today}-{sequence:03d}"
    
    return order_number
```

---

## 5. ê¸°ìˆ  ìŠ¤íƒ

### 5.1 ë°±ì—”ë“œ í”„ë ˆì„ì›Œí¬

**í•µì‹¬ ê¸°ìˆ **
- **Python 3.11+**: ìµœì‹  Python ë²„ì „
- **FastAPI**: ê³ ì„±ëŠ¥ ë¹„ë™ê¸° ì›¹ í”„ë ˆì„ì›Œí¬
- **Uvicorn**: ASGI ì„œë²„
- **Pydantic v2**: ë°ì´í„° ê²€ì¦ ë° ì§ë ¬í™”

**FastAPI ì„ íƒ ì´ìœ **
- ìë™ API ë¬¸ì„œ ìƒì„± (Swagger/ReDoc)
- íƒ€ì… íŒíŠ¸ ê¸°ë°˜ ìë™ ê²€ì¦
- ë¹„ë™ê¸° ì²˜ë¦¬ ì§€ì› (async/await)
- ë¹ ë¥¸ ì„±ëŠ¥ (Starlette ê¸°ë°˜)
- ì§ê´€ì ì¸ ë¼ìš°íŒ… ë° ì˜ì¡´ì„± ì£¼ì…

---

### 5.2 ë°ì´í„°ë² ì´ìŠ¤

**ë°ì´í„°ë² ì´ìŠ¤**
- **PostgreSQL 15+**: ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤
- **asyncpg**: ë¹„ë™ê¸° PostgreSQL ë“œë¼ì´ë²„

**ORM ë° ë§ˆì´ê·¸ë ˆì´ì…˜**
- **SQLAlchemy 2.0**: ORM (Object-Relational Mapping)
- **Alembic**: ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë§ˆì´ê·¸ë ˆì´ì…˜

**PostgreSQL ì„ íƒ ì´ìœ **
- ì•ˆì •ì ì¸ íŠ¸ëœì­ì…˜ ì²˜ë¦¬ (ACID)
- JSON ì»¬ëŸ¼ ì§€ì› (OrderItemsì˜ selected_options)
- í’ë¶€í•œ ì¸ë±ì‹± ê¸°ëŠ¥
- ë¬´ë£Œ í˜¸ìŠ¤íŒ… ì§€ì› (Render, Supabase)

---

### 5.3 ì¸ì¦ ë° ë³´ì•ˆ

**ì¸ì¦**
- **FastAPI Users**: ì‚¬ìš©ì ì¸ì¦ ì‹œìŠ¤í…œ
- **OAuth2** with **JWT**: í† í° ê¸°ë°˜ ì¸ì¦
- **python-jose**: JWT ìƒì„±/ê²€ì¦
- **passlib[bcrypt]**: ë¹„ë°€ë²ˆí˜¸ í•´ì‹±

**ë³´ì•ˆ ê³ ë ¤ì‚¬í•­**
- ë¹„ë°€ë²ˆí˜¸ bcrypt í•´ì‹± (ìµœì†Œ 12 rounds)
- JWT í† í° ë§Œë£Œ ì‹œê°„ ì„¤ì •
- HTTPS ì ìš© (í”„ë¡œë•ì…˜)
- CORS ì •ì±… ì„¤ì •

---

### 5.4 í…ŒìŠ¤íŠ¸

**í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬**
- **pytest**: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ë° í†µí•© í…ŒìŠ¤íŠ¸
- **pytest-asyncio**: ë¹„ë™ê¸° í•¨ìˆ˜ í…ŒìŠ¤íŠ¸
- **httpx**: FastAPI í…ŒìŠ¤íŠ¸ í´ë¼ì´ì–¸íŠ¸
- **faker**: í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±

**í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ëª©í‘œ**
- ë‹¨ìœ„ í…ŒìŠ¤íŠ¸: 70% ì´ìƒ
- í†µí•© í…ŒìŠ¤íŠ¸: ì£¼ìš” API ì—”ë“œí¬ì¸íŠ¸

---

### 5.5 ë°°í¬

**ë°°í¬ í”Œë«í¼**
- **Render**: ë°±ì—”ë“œ í˜¸ìŠ¤íŒ…
  - Web Service: FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜
  - PostgreSQL: ê´€ë¦¬í˜• ë°ì´í„°ë² ì´ìŠ¤

**í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬**
- `.env` íŒŒì¼ (ë¡œì»¬ ê°œë°œ)
- Render í™˜ê²½ ë³€ìˆ˜ (í”„ë¡œë•ì…˜)

**í•„ìˆ˜ í™˜ê²½ ë³€ìˆ˜**
```bash
# Database
DATABASE_URL=postgresql+asyncpg://user:pass@host:port/db

# JWT
SECRET_KEY=your-secret-key-here
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# CORS
ALLOWED_ORIGINS=http://localhost:5173,https://yourdomain.com

# Environment
ENVIRONMENT=production
```

---

### 5.6 ê°œë°œ ë„êµ¬

**IDE**
- VS Code ë˜ëŠ” PyCharm

**API í…ŒìŠ¤íŠ¸**
- Postman ë˜ëŠ” Insomnia
- FastAPI Swagger UI (ë‚´ì¥)

**ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬**
- DBeaver ë˜ëŠ” pgAdmin

---

## 6. ê°œë°œ ë¡œë“œë§µ

### Phase 1: í”„ë¡œì íŠ¸ ì„¤ì • ë° ê¸°ë³¸ êµ¬ì¡° (1ì£¼)

**Day 1-2: í™˜ê²½ ì„¤ì •**
- [ ] Python ê°€ìƒí™˜ê²½ ìƒì„±
- [ ] ì˜ì¡´ì„± ì„¤ì¹˜ (FastAPI, SQLAlchemy, etc.)
- [ ] í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¤ì •
  ```
  backend/
  â”œâ”€â”€ app/
  â”‚   â”œâ”€â”€ __init__.py
  â”‚   â”œâ”€â”€ main.py
  â”‚   â”œâ”€â”€ api/
  â”‚   â”‚   â”œâ”€â”€ __init__.py
  â”‚   â”‚   â”œâ”€â”€ v1/
  â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
  â”‚   â”‚   â”‚   â”œâ”€â”€ menus.py
  â”‚   â”‚   â”‚   â”œâ”€â”€ orders.py
  â”‚   â”‚   â”‚   â””â”€â”€ admin.py
  â”‚   â”œâ”€â”€ models/
  â”‚   â”‚   â”œâ”€â”€ __init__.py
  â”‚   â”‚   â”œâ”€â”€ menu.py
  â”‚   â”‚   â”œâ”€â”€ option.py
  â”‚   â”‚   â”œâ”€â”€ order.py
  â”‚   â”‚   â””â”€â”€ order_item.py
  â”‚   â”œâ”€â”€ schemas/
  â”‚   â”‚   â”œâ”€â”€ __init__.py
  â”‚   â”‚   â”œâ”€â”€ menu.py
  â”‚   â”‚   â”œâ”€â”€ option.py
  â”‚   â”‚   â””â”€â”€ order.py
  â”‚   â”œâ”€â”€ services/
  â”‚   â”‚   â”œâ”€â”€ __init__.py
  â”‚   â”‚   â”œâ”€â”€ menu_service.py
  â”‚   â”‚   â””â”€â”€ order_service.py
  â”‚   â”œâ”€â”€ core/
  â”‚   â”‚   â”œâ”€â”€ __init__.py
  â”‚   â”‚   â”œâ”€â”€ config.py
  â”‚   â”‚   â””â”€â”€ database.py
  â”‚   â””â”€â”€ utils/
  â”‚       â”œâ”€â”€ __init__.py
  â”‚       â””â”€â”€ exceptions.py
  â”œâ”€â”€ alembic/
  â”œâ”€â”€ tests/
  â”œâ”€â”€ .env.example
  â”œâ”€â”€ requirements.txt
  â””â”€â”€ README.md
  ```

**Day 3-4: ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •**
- [ ] PostgreSQL ì—°ê²° ì„¤ì •
- [ ] SQLAlchemy ëª¨ë¸ ì •ì˜ (Menus, Options, Orders, OrderItems)
- [ ] Alembic ë§ˆì´ê·¸ë ˆì´ì…˜ ì´ˆê¸°í™”
- [ ] ì´ˆê¸° ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„± ë° ì ìš©
- [ ] ì‹œë“œ ë°ì´í„° ì‘ì„± (í…ŒìŠ¤íŠ¸ìš© ë©”ë‰´ ë°ì´í„°)

**Day 5-7: ê¸°ë³¸ API êµ¬ì¡°**
- [ ] FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •
- [ ] CORS ì„¤ì •
- [ ] ì—ëŸ¬ í•¸ë“¤ëŸ¬ ì„¤ì •
- [ ] Pydantic ìŠ¤í‚¤ë§ˆ ì •ì˜
- [ ] API ë¼ìš°í„° ì„¤ì •

---

### Phase 2: ë©”ë‰´ API êµ¬í˜„ (1ì£¼)

**Day 8-10: ë©”ë‰´ ì¡°íšŒ API**
- [ ] `GET /api/v1/menus` êµ¬í˜„
- [ ] `GET /api/v1/menus/:id` êµ¬í˜„
- [ ] ë©”ë‰´-ì˜µì…˜ ê´€ê³„ ì¿¼ë¦¬ ìµœì í™”
- [ ] Pydantic ì‘ë‹µ ëª¨ë¸ ì •ì˜
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±

**Day 11-14: ê´€ë¦¬ì ë©”ë‰´ ê´€ë¦¬ API**
- [ ] ê´€ë¦¬ì ê¶Œí•œ ë¯¸ë“¤ì›¨ì–´ êµ¬í˜„
- [ ] `POST /api/v1/menus` êµ¬í˜„
- [ ] `PATCH /api/v1/menus/:id/stock` êµ¬í˜„
- [ ] `GET /api/v1/admin/menus/stock` êµ¬í˜„
- [ ] ì¬ê³  ê´€ë¦¬ ë¡œì§ êµ¬í˜„
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ ì‘ì„±

---

### Phase 3: ì£¼ë¬¸ API êµ¬í˜„ (2ì£¼)

**Day 15-18: ì£¼ë¬¸ ìƒì„± API**
- [ ] `POST /api/v1/orders` êµ¬í˜„
- [ ] ì£¼ë¬¸ ë°ì´í„° ê²€ì¦ ë¡œì§
- [ ] ì¬ê³  í™•ì¸ ë¡œì§
- [ ] ê°€ê²© ê³„ì‚° ë¡œì§
- [ ] íŠ¸ëœì­ì…˜ ì²˜ë¦¬
- [ ] ì£¼ë¬¸ ë²ˆí˜¸ ìƒì„± ë¡œì§
- [ ] ì¬ê³  ê°ì†Œ ë¡œì§

**Day 19-21: ì£¼ë¬¸ ì¡°íšŒ API**
- [ ] `GET /api/v1/orders/:id` êµ¬í˜„
- [ ] ì£¼ë¬¸ ìƒì„¸ ì •ë³´ ì¡°íšŒ
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±

**Day 22-28: ê´€ë¦¬ì ì£¼ë¬¸ ê´€ë¦¬ API**
- [ ] `GET /api/v1/admin/orders` êµ¬í˜„
- [ ] ì£¼ë¬¸ í†µê³„ ê³„ì‚° ë¡œì§
- [ ] `PATCH /api/v1/admin/orders/:id/status` êµ¬í˜„
- [ ] ì£¼ë¬¸ ìƒíƒœ ì „ì´ ê²€ì¦ ë¡œì§
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] API ë¬¸ì„œ í™•ì¸ ë° ë³´ì™„

---

### Phase 4: í…ŒìŠ¤íŠ¸ ë° ìµœì í™” (1ì£¼)

**Day 29-32: í…ŒìŠ¤íŠ¸**
- [ ] ì „ì²´ API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
- [ ] ì—ëŸ¬ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸
- [ ] ê²½ê³„ê°’ í…ŒìŠ¤íŠ¸
- [ ] ë™ì‹œì„± í…ŒìŠ¤íŠ¸ (ì¬ê³  ì²˜ë¦¬)
- [ ] í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ í™•ì¸

**Day 33-35: ìµœì í™” ë° ë¬¸ì„œí™”**
- [ ] ì¿¼ë¦¬ ìµœì í™” (N+1 ë¬¸ì œ í•´ê²°)
- [ ] ì¸ë±ìŠ¤ ì¶”ê°€
- [ ] API ë¬¸ì„œ ë³´ì™„ (Swagger)
- [ ] README ì‘ì„±
- [ ] ë°°í¬ ê°€ì´ë“œ ì‘ì„±

---

### Phase 5: ë°°í¬ (3ì¼)

**Day 36-38: Render ë°°í¬**
- [ ] Render Web Service ìƒì„±
- [ ] PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°
- [ ] í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
- [ ] ì‹œë“œ ë°ì´í„° ì…ë ¥
- [ ] í”„ë¡œë•ì…˜ í…ŒìŠ¤íŠ¸
- [ ] í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ í…ŒìŠ¤íŠ¸

---

## 7. ë¶€ë¡

### 7.1 SQLAlchemy ëª¨ë¸ ì˜ˆì‹œ

```python
# app/models/menu.py
from sqlalchemy import Column, Integer, String, Text, DECIMAL, Boolean, DateTime
from sqlalchemy.orm import relationship
from sqlalchemy.sql import func
from app.core.database import Base

class Menu(Base):
    __tablename__ = "menus"
    
    id = Column(Integer, primary_key=True, index=True)
    name = Column(String(100), unique=True, nullable=False)
    description = Column(Text)
    price = Column(DECIMAL(10, 2), nullable=False)
    image_url = Column(String(500))
    stock = Column(Integer, nullable=False, default=0)
    is_available = Column(Boolean, default=True)
    created_at = Column(DateTime, server_default=func.now())
    updated_at = Column(DateTime, onupdate=func.now())
    
    # Relationships
    options = relationship("Option", back_populates="menu", cascade="all, delete-orphan")
    order_items = relationship("OrderItem", back_populates="menu")
```

```python
# app/models/option.py
from sqlalchemy import Column, Integer, String, DECIMAL, ForeignKey, DateTime
from sqlalchemy.orm import relationship
from sqlalchemy.sql import func
from app.core.database import Base

class Option(Base):
    __tablename__ = "options"
    
    id = Column(Integer, primary_key=True, index=True)
    menu_id = Column(Integer, ForeignKey("menus.id", ondelete="CASCADE"), nullable=False)
    name = Column(String(100), nullable=False)
    price = Column(DECIMAL(10, 2), nullable=False, default=0)
    option_type = Column(String(50), nullable=False)
    created_at = Column(DateTime, server_default=func.now())
    updated_at = Column(DateTime, onupdate=func.now())
    
    # Relationships
    menu = relationship("Menu", back_populates="options")
```

---

### 7.2 Pydantic ìŠ¤í‚¤ë§ˆ ì˜ˆì‹œ

```python
# app/schemas/order.py
from pydantic import BaseModel, Field, validator
from typing import List, Optional
from datetime import datetime
from decimal import Decimal

class OptionInOrder(BaseModel):
    id: int
    name: str
    price: Decimal
    option_type: str

class OrderItemCreate(BaseModel):
    menu_id: int = Field(..., gt=0, description="ë©”ë‰´ ID")
    quantity: int = Field(..., gt=0, le=100, description="ìˆ˜ëŸ‰ (1-100)")
    selected_options: List[OptionInOrder] = []

class OrderCreate(BaseModel):
    items: List[OrderItemCreate] = Field(..., min_items=1, max_items=20)
    special_request: Optional[str] = Field(None, max_length=500)
    
    @validator('items')
    def validate_items(cls, v):
        if not v:
            raise ValueError('ì£¼ë¬¸ í•­ëª©ì´ ìµœì†Œ 1ê°œ ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.')
        return v

class OrderItemResponse(BaseModel):
    id: int
    menu_name: str
    quantity: int
    unit_price: Decimal
    subtotal: Decimal
    selected_options: List[OptionInOrder]

class OrderResponse(BaseModel):
    id: int
    order_number: str
    status: str
    total_amount: Decimal
    special_request: Optional[str]
    created_at: datetime
    updated_at: Optional[datetime]
    items: List[OrderItemResponse]
    
    class Config:
        from_attributes = True
```

---

### 7.3 API ì‘ë‹µ í¬ë§· í—¬í¼

```python
# app/utils/response.py
from typing import Any, Optional
from fastapi.responses import JSONResponse

def success_response(
    data: Any,
    message: Optional[str] = None,
    status_code: int = 200
) -> JSONResponse:
    """ì„±ê³µ ì‘ë‹µ í¬ë§·"""
    response = {"success": True}
    if message:
        response["message"] = message
    response["data"] = data
    
    return JSONResponse(
        content=response,
        status_code=status_code
    )

def error_response(
    code: str,
    message: str,
    details: Optional[dict] = None,
    status_code: int = 400
) -> JSONResponse:
    """ì—ëŸ¬ ì‘ë‹µ í¬ë§·"""
    response = {
        "success": False,
        "error": {
            "code": code,
            "message": message
        }
    }
    if details:
        response["error"]["details"] = details
    
    return JSONResponse(
        content=response,
        status_code=status_code
    )
```

---

## ë¬¸ì„œ ì´ë ¥

| ë²„ì „ | ë‚ ì§œ | ì‘ì„±ì | ë³€ê²½ ë‚´ìš© |
|------|------|--------|----------|
| 1.0 | 2025-11-02 | kznetwork | ë°±ì—”ë“œ PRD ì´ˆì•ˆ ì‘ì„± |

---

**ë¬¸ì„œ ìŠ¹ì¸**
- ì‘ì„±ì: kznetwork
- ê²€í† ì: (TBD)
- ìŠ¹ì¸ì¼: 2025-11-02

---

**ë‹¤ìŒ ë‹¨ê³„**: ë°±ì—”ë“œ ê°œë°œ í™˜ê²½ ì„¤ì • ë° ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ êµ¬í˜„

```

ë°±ì—”ë“œ ê°œë°œì„ ìœ„í•œ PRDë¥¼ ì‘ì„±í•˜ì—¬ `Docs/Backend_PRD.md` íŒŒì¼ë¡œ ì €ì¥í–ˆìŠµë‹ˆë‹¤.

## ì‘ì„±ëœ ë‚´ìš© ìš”ì•½:

### 1. **ë°ì´í„° ëª¨ë¸** (ìƒì„¸ ì„¤ê³„)
- **Menus**: ì»¤í”¼ ì´ë¦„, ì„¤ëª…, ê°€ê²©, ì´ë¯¸ì§€, ì¬ê³  ìˆ˜ëŸ‰, íŒë§¤ ê°€ëŠ¥ ì—¬ë¶€
- **Options**: ì˜µì…˜ ì´ë¦„, ê°€ê²©, ì˜µì…˜ íƒ€ì…, ì—°ê²°ëœ ë©”ë‰´
- **Orders**: ì£¼ë¬¸ ë²ˆí˜¸, ìƒíƒœ, ì´ ê¸ˆì•¡, ì£¼ë¬¸ ì¼ì‹œ
- **OrderItems**: ì£¼ë¬¸ ìƒì„¸ (ë©”ë‰´, ìˆ˜ëŸ‰, ë‹¨ê°€, ì„ íƒëœ ì˜µì…˜)

### 2. **ì‚¬ìš©ì íë¦„ ê¸°ë°˜ ë°±ì—”ë“œ ë¡œì§**
- ë©”ë‰´ ì¡°íšŒ â†’ ì¥ë°”êµ¬ë‹ˆ â†’ ì£¼ë¬¸ ìƒì„± â†’ ì¬ê³  ê°ì†Œ â†’ ê´€ë¦¬ì ì£¼ë¬¸ ê´€ë¦¬
- ê° ë‹¨ê³„ë³„ ë°±ì—”ë“œ ì²˜ë¦¬ í”„ë¡œì„¸ìŠ¤ì™€ íŠ¸ëœì­ì…˜ ê´€ë¦¬ í¬í•¨

### 3. **API ì„¤ê³„** (RESTful)
- **ë©”ë‰´ API**: ëª©ë¡ ì¡°íšŒ, ìƒì„¸ ì¡°íšŒ, ë©”ë‰´ ë“±ë¡/ìˆ˜ì •, ì¬ê³  ê´€ë¦¬
- **ì£¼ë¬¸ API**: ì£¼ë¬¸ ìƒì„±, ì£¼ë¬¸ ì¡°íšŒ
- **ê´€ë¦¬ì API**: ì „ì²´ ì£¼ë¬¸ ì¡°íšŒ, ì£¼ë¬¸ ìƒíƒœ ë³€ê²½, ì¬ê³  í˜„í™© ì¡°íšŒ
- ëª¨ë“  APIì— ìš”ì²­/ì‘ë‹µ ì˜ˆì‹œì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í¬í•¨

### 4. **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**
- ì¬ê³  ê´€ë¦¬ (ê°ì†Œ/ì¦ê°€/ì„¤ì •)
- ì£¼ë¬¸ ë²ˆí˜¸ ìƒì„± ê·œì¹™
- ì£¼ë¬¸ ìƒíƒœ ì „ì´ ê²€ì¦
- íŠ¸ëœì­ì…˜ ì²˜ë¦¬ ë¡œì§

### 5. **ê¸°ìˆ  ìŠ¤íƒ**
- FastAPI + Python 3.11+
- PostgreSQL + SQLAlchemy 2.0
- JWT ì¸ì¦
- pytest í…ŒìŠ¤íŠ¸

### 6. **ê°œë°œ ë¡œë“œë§µ** (5-6ì£¼)
- Phase 1: í”„ë¡œì íŠ¸ ì„¤ì •
- Phase 2: ë©”ë‰´ API
- Phase 3: ì£¼ë¬¸ API
- Phase 4: í…ŒìŠ¤íŠ¸ ë° ìµœì í™”
- Phase 5: ë°°í¬

ë¬¸ì„œì—ëŠ” SQLAlchemy ëª¨ë¸ ì˜ˆì‹œ, Pydantic ìŠ¤í‚¤ë§ˆ ì˜ˆì‹œ, ì‘ë‹µ í¬ë§· í—¬í¼ ë“± ì‹¤ì œ êµ¬í˜„ì— í•„ìš”í•œ ì½”ë“œ ì˜ˆì‹œë„ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

---

**User**

FastAPI + Python ì¡°í•©ìœ¼ë¡œ, Python ê¸°ë°˜ ë°±ì—”ë“œ ì„œë²„ ê°œë°œì„ ìœ„í•œ ê°œë°œ í™˜ê²½ì„ ë§Œë“¤ì–´ ì£¼ê³ , ì„œë²„ ì ‘ì† í…ŒìŠ¤íŠ¸ë¥¼ í•´ ì£¼ì„¸ìš”. 

---

**Cursor**

FastAPI + Python ê¸°ë°˜ ë°±ì—”ë“œ ê°œë°œ í™˜ê²½ì„ êµ¬ì¶•í•˜ê³  ì„œë²„ ì ‘ì† í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ê² ìŠµë‹ˆë‹¤.

ë°±ì—”ë“œ í”„ë¡œì íŠ¸ êµ¬ì¡°ë¥¼ ìƒì„±í•˜ê² ìŠµë‹ˆë‹¤.

```pip-requirements
# FastAPI and ASGI Server
fastapi==0.109.0
uvicorn[standard]==0.27.0

# Database
sqlalchemy==2.0.25
asyncpg==0.29.0
alembic==1.13.1

# Pydantic for data validation
pydantic==2.5.3
pydantic-settings==2.1.0

# Authentication & Security
python-jose[cryptography]==3.3.0
passlib[bcrypt]==1.7.4
python-multipart==0.0.6

# Environment variables
python-dotenv==1.0.0

# CORS
fastapi-cors==0.0.6

# Testing
pytest==7.4.4
pytest-asyncio==0.23.3
httpx==0.26.0
faker==22.0.0

# Development
black==23.12.1
pylint==3.0.3

```

```python
"""
OrderBean Backend Application
"""

__version__ = "1.0.0"

```

```python
"""
FastAPI Main Application
"""
from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware
from datetime import datetime

app = FastAPI(
    title="OrderBean API",
    description="ì»¤í”¼ ì£¼ë¬¸ ê´€ë¦¬ ì‹œìŠ¤í…œ ë°±ì—”ë“œ API",
    version="1.0.0",
    docs_url="/api/docs",
    redoc_url="/api/redoc",
)

# CORS ì„¤ì •
app.add_middleware(
    CORSMiddleware,
    allow_origins=[
        "http://localhost:5173",  # Vite ê°œë°œ ì„œë²„
        "http://localhost:3000",  # ëŒ€ì²´ í¬íŠ¸
    ],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)


@app.get("/")
async def root():
    """ë£¨íŠ¸ ì—”ë“œí¬ì¸íŠ¸ - API ìƒíƒœ í™•ì¸"""
    return {
        "message": "OrderBean API Server",
        "version": "1.0.0",
        "status": "running",
        "timestamp": datetime.now().isoformat(),
        "docs": "/api/docs",
    }


@app.get("/health")
async def health_check():
    """í—¬ìŠ¤ ì²´í¬ ì—”ë“œí¬ì¸íŠ¸"""
    return {
        "status": "healthy",
        "timestamp": datetime.now().isoformat(),
    }


@app.get("/api/v1/test")
async def test_endpoint():
    """í…ŒìŠ¤íŠ¸ ì—”ë“œí¬ì¸íŠ¸"""
    return {
        "success": True,
        "message": "FastAPI ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤!",
        "data": {
            "framework": "FastAPI",
            "python": "3.11+",
            "features": ["ë¹„ë™ê¸° ì²˜ë¦¬", "ìë™ API ë¬¸ì„œ", "íƒ€ì… ê²€ì¦"],
        },
    }

```

```ignore
# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
env/
venv/
ENV/
build/
develop-eggs/
dist/
downloads/
eggs/
.eggs/
lib/
lib64/
parts/
sdist/
var/
wheels/
*.egg-info/
.installed.cfg
*.egg

# Virtual Environment
venv/
.venv/
env/
.env

# IDE
.vscode/
.idea/
*.swp
*.swo
*~

# Environment variables
.env
.env.local

# Database
*.db
*.sqlite3

# Testing
.pytest_cache/
.coverage
htmlcov/

# Logs
*.log

# OS
.DS_Store
Thumbs.db

```

```markdown
# OrderBean Backend

FastAPI ê¸°ë°˜ ì»¤í”¼ ì£¼ë¬¸ ê´€ë¦¬ ì‹œìŠ¤í…œ ë°±ì—”ë“œ API

## ê¸°ìˆ  ìŠ¤íƒ

- **Framework**: FastAPI 0.109.0
- **Language**: Python 3.11+
- **Database**: PostgreSQL 15+ with asyncpg
- **ORM**: SQLAlchemy 2.0
- **Authentication**: JWT (JSON Web Token)
- **Server**: Uvicorn (ASGI)

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py              # FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜ ì§„ì…ì 
â”‚   â”œâ”€â”€ api/                 # API ì—”ë“œí¬ì¸íŠ¸
â”‚   â”‚   â””â”€â”€ v1/
â”‚   â”œâ”€â”€ models/              # SQLAlchemy ëª¨ë¸
â”‚   â”œâ”€â”€ schemas/             # Pydantic ìŠ¤í‚¤ë§ˆ
â”‚   â”œâ”€â”€ services/            # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ core/                # ì„¤ì • ë° ë°ì´í„°ë² ì´ìŠ¤
â”‚   â””â”€â”€ utils/               # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”œâ”€â”€ tests/                   # í…ŒìŠ¤íŠ¸ íŒŒì¼
â”œâ”€â”€ alembic/                 # ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
â”œâ”€â”€ requirements.txt         # Python íŒ¨í‚¤ì§€ ì˜ì¡´ì„±
â”œâ”€â”€ .env.example             # í™˜ê²½ ë³€ìˆ˜ ì˜ˆì‹œ
â””â”€â”€ README.md
```

## ì‹œì‘í•˜ê¸°

### 1. ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”

```bash
# ê°€ìƒí™˜ê²½ ìƒì„±
python -m venv venv

# Windows
venv\Scripts\activate

# macOS/Linux
source venv/bin/activate
```

### 2. íŒ¨í‚¤ì§€ ì„¤ì¹˜

```bash
pip install -r requirements.txt
```

### 3. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

```bash
# .env.exampleì„ .envë¡œ ë³µì‚¬
cp .env.example .env

# .env íŒŒì¼ í¸ì§‘ (í•„ìš”í•œ ê²½ìš°)
```

### 4. ì„œë²„ ì‹¤í–‰

```bash
# ê°œë°œ ì„œë²„ ì‹¤í–‰ (í•« ë¦¬ë¡œë“œ í™œì„±í™”)
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

# ë˜ëŠ”
python -m uvicorn app.main:app --reload
```

### 5. API ë¬¸ì„œ í™•ì¸

ì„œë²„ ì‹¤í–‰ í›„ ë‹¤ìŒ URLì—ì„œ API ë¬¸ì„œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- **Swagger UI**: http://localhost:8000/api/docs
- **ReDoc**: http://localhost:8000/api/redoc

## API ì—”ë“œí¬ì¸íŠ¸

### ê¸°ë³¸ ì—”ë“œí¬ì¸íŠ¸

- `GET /` - API ìƒíƒœ í™•ì¸
- `GET /health` - í—¬ìŠ¤ ì²´í¬
- `GET /api/v1/test` - í…ŒìŠ¤íŠ¸ ì—”ë“œí¬ì¸íŠ¸

### í–¥í›„ êµ¬í˜„ ì˜ˆì •

- `GET /api/v1/menus` - ë©”ë‰´ ëª©ë¡ ì¡°íšŒ
- `POST /api/v1/orders` - ì£¼ë¬¸ ìƒì„±
- `GET /api/v1/admin/orders` - ê´€ë¦¬ì ì£¼ë¬¸ ì¡°íšŒ

## ê°œë°œ

### ì½”ë“œ í¬ë§·íŒ…

```bash
# Blackìœ¼ë¡œ ì½”ë“œ í¬ë§·íŒ…
black app/

# Pylintë¡œ ì½”ë“œ ê²€ì‚¬
pylint app/
```

### í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
pytest

# ì»¤ë²„ë¦¬ì§€ í¬í•¨
pytest --cov=app tests/
```

## ë°°í¬

### Render ë°°í¬

1. GitHub ì €ì¥ì†Œì™€ ì—°ê²°
2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
3. ë¹Œë“œ ëª…ë ¹ì–´: `pip install -r requirements.txt`
4. ì‹œì‘ ëª…ë ¹ì–´: `uvicorn app.main:app --host 0.0.0.0 --port $PORT`

## ë¼ì´ì„ ìŠ¤

MIT License

```

ì¶”ê°€ ë””ë ‰í† ë¦¬ êµ¬ì¡°ë¥¼ ìƒì„±í•˜ê² ìŠµë‹ˆë‹¤.

```python
"""
API Routes
"""

```

```python
"""
API v1 Routes
"""

```

```python
"""
Core Configuration
"""

```

```python
"""
Database Models
"""

```

```python
"""
Pydantic Schemas
"""

```

```python
"""
Business Logic Services
"""

```

```python
"""
Utility Functions
"""

```

```python
"""
Tests
"""

```

```plaintext
# Database Configuration
DATABASE_URL=postgresql+asyncpg://user:password@localhost:5432/orderbean

# JWT Configuration
SECRET_KEY=your-secret-key-here-please-change-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# CORS Configuration
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000

# Environment
ENVIRONMENT=development
DEBUG=True

# Server Configuration
HOST=0.0.0.0
PORT=8000

```

ì´ì œ Python ê°€ìƒí™˜ê²½ì„ ì„¤ì •í•˜ê³  íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ê² ìŠµë‹ˆë‹¤.

---

**User**

ì§€ê¸ˆê¹Œì§€ ì‘ì—…í•œ ë‚´ìš©ì„ ëª¨ë‘ Report í´ë”ì— ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ ì €ì¥í•´ì¤˜.

---

**Cursor**

ì§€ê¸ˆê¹Œì§€ ì‘ì—…í•œ ë‚´ìš©ì„ Report í´ë”ì— ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ì €ì¥í•˜ê² ìŠµë‹ˆë‹¤.

```markdown
# Backend ê°œë°œ í™˜ê²½ êµ¬ì¶• ë³´ê³ ì„œ

**í”„ë¡œì íŠ¸**: OrderBean  
**ì‘ì—…ì¼**: 2025ë…„ 11ì›” 2ì¼  
**ì‘ì—…ì**: AI Assistant  
**ì‘ì—… ë‚´ìš©**: FastAPI + Python ë°±ì—”ë“œ ê°œë°œ í™˜ê²½ êµ¬ì¶•

---

## ğŸ“‹ ëª©ì°¨

1. [ì‘ì—… ê°œìš”](#1-ì‘ì—…-ê°œìš”)
2. [ë°±ì—”ë“œ PRD ì‘ì„±](#2-ë°±ì—”ë“œ-prd-ì‘ì„±)
3. [í”„ë¡œì íŠ¸ êµ¬ì¡° ìƒì„±](#3-í”„ë¡œì íŠ¸-êµ¬ì¡°-ìƒì„±)
4. [ì£¼ìš” íŒŒì¼ ì„¤ëª…](#4-ì£¼ìš”-íŒŒì¼-ì„¤ëª…)
5. [ê°œë°œ í™˜ê²½ ì„¤ì • ê°€ì´ë“œ](#5-ê°œë°œ-í™˜ê²½-ì„¤ì •-ê°€ì´ë“œ)
6. [ë‹¤ìŒ ë‹¨ê³„](#6-ë‹¤ìŒ-ë‹¨ê³„)

---

## 1. ì‘ì—… ê°œìš”

### 1.1 ëª©ì 

OrderBean í”„ë¡œì íŠ¸ì˜ ë°±ì—”ë“œ ì„œë²„ë¥¼ FastAPI + Python ì¡°í•©ìœ¼ë¡œ ê°œë°œí•˜ê¸° ìœ„í•œ ê¸°ë°˜ í™˜ê²½ì„ êµ¬ì¶•í•˜ê³ , ê°œë°œ ê°€ì´ë“œ ë¬¸ì„œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

### 1.2 ì™„ë£Œëœ ì‘ì—…

âœ… **ë°±ì—”ë“œ PRD ë¬¸ì„œ ì‘ì„±**
- ë°ì´í„° ëª¨ë¸ ì„¤ê³„ (Menus, Options, Orders, OrderItems)
- API ì„¤ê³„ (RESTful API)
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì •ì˜
- ê¸°ìˆ  ìŠ¤íƒ ì„ ì •
- ê°œë°œ ë¡œë“œë§µ ìˆ˜ë¦½

âœ… **í”„ë¡œì íŠ¸ êµ¬ì¡° ìƒì„±**
- í‘œì¤€ FastAPI í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì¡°
- ëª¨ë“ˆë³„ íŒ¨í‚¤ì§€ ë¶„ë¦¬ (api, models, schemas, services, core, utils)
- í…ŒìŠ¤íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì„±

âœ… **í•µì‹¬ ì„¤ì • íŒŒì¼ ì‘ì„±**
- `requirements.txt`: Python íŒ¨í‚¤ì§€ ì˜ì¡´ì„± ì •ì˜
- `app/main.py`: FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜ ì§„ì…ì 
- `README.md`: ê°œë°œ ê°€ì´ë“œ ë¬¸ì„œ
- `env_example.txt`: í™˜ê²½ ë³€ìˆ˜ ì˜ˆì‹œ
- `.gitignore`: Git ë²„ì „ ê´€ë¦¬ ì œì™¸ íŒŒì¼

### 1.3 ê¸°ìˆ  ìŠ¤íƒ

| êµ¬ë¶„ | ê¸°ìˆ  | ë²„ì „ |
|------|------|------|
| **ì–¸ì–´** | Python | 3.11+ |
| **í”„ë ˆì„ì›Œí¬** | FastAPI | 0.109.0 |
| **ì„œë²„** | Uvicorn | 0.27.0 |
| **ë°ì´í„°ë² ì´ìŠ¤** | PostgreSQL | 15+ |
| **ORM** | SQLAlchemy | 2.0.25 |
| **ë§ˆì´ê·¸ë ˆì´ì…˜** | Alembic | 1.13.1 |
| **ì¸ì¦** | JWT (python-jose) | 3.3.0 |
| **í…ŒìŠ¤íŠ¸** | pytest | 7.4.4 |

---

## 2. ë°±ì—”ë“œ PRD ì‘ì„±

### 2.1 ë¬¸ì„œ ìœ„ì¹˜

`Docs/Backend_PRD.md`

### 2.2 ì£¼ìš” ë‚´ìš©

#### ë°ì´í„° ëª¨ë¸

**Menus (ë©”ë‰´)**
- ì»¤í”¼ ì´ë¦„, ì„¤ëª…, ê°€ê²©, ì´ë¯¸ì§€, ì¬ê³  ìˆ˜ëŸ‰
- íŒë§¤ ê°€ëŠ¥ ì—¬ë¶€ ê´€ë¦¬
- ì˜µì…˜ê³¼ 1:N ê´€ê³„

**Options (ì˜µì…˜)**
- ì˜µì…˜ ì´ë¦„, ê°€ê²©, ì˜µì…˜ íƒ€ì…
- ë©”ë‰´ì— ì¢…ì†ì 
- ì‚¬ì´ì¦ˆ, ìƒ·, ì‹œëŸ½, ì–¼ìŒ ë“± ë‹¤ì–‘í•œ ì˜µì…˜ íƒ€ì… ì§€ì›

**Orders (ì£¼ë¬¸)**
- ì£¼ë¬¸ ë²ˆí˜¸ (ORD-YYYYMMDD-XXX í˜•ì‹)
- ì£¼ë¬¸ ìƒíƒœ (pending â†’ preparing â†’ completed)
- ì´ ì£¼ë¬¸ ê¸ˆì•¡, íŠ¹ë³„ ìš”ì²­ì‚¬í•­

**OrderItems (ì£¼ë¬¸ ìƒì„¸)**
- ë©”ë‰´ë³„ ìˆ˜ëŸ‰, ë‹¨ê°€, ì†Œê³„
- ì„ íƒëœ ì˜µì…˜ ì •ë³´ (JSON í˜•ì‹)

#### API ì„¤ê³„

**ë©”ë‰´ API**
- `GET /api/v1/menus`: ë©”ë‰´ ëª©ë¡ ì¡°íšŒ
- `GET /api/v1/menus/:id`: ë©”ë‰´ ìƒì„¸ ì¡°íšŒ
- `POST /api/v1/menus`: ë©”ë‰´ ë“±ë¡ (ê´€ë¦¬ì)
- `PATCH /api/v1/menus/:id/stock`: ì¬ê³  ìˆ˜ì • (ê´€ë¦¬ì)

**ì£¼ë¬¸ API**
- `POST /api/v1/orders`: ì£¼ë¬¸ ìƒì„±
- `GET /api/v1/orders/:id`: ì£¼ë¬¸ ìƒì„¸ ì¡°íšŒ

**ê´€ë¦¬ì API**
- `GET /api/v1/admin/orders`: ì „ì²´ ì£¼ë¬¸ ì¡°íšŒ
- `PATCH /api/v1/admin/orders/:id/status`: ì£¼ë¬¸ ìƒíƒœ ë³€ê²½
- `GET /api/v1/admin/menus/stock`: ì¬ê³  í˜„í™© ì¡°íšŒ

#### ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§

**ì£¼ë¬¸ ìƒì„± í”„ë¡œì„¸ìŠ¤**
1. ë°ì´í„° ìœ íš¨ì„± ê²€ì¦
2. ì¬ê³  í™•ì¸
3. ê°€ê²© ê³„ì‚° (ë©”ë‰´ ê°€ê²© + ì˜µì…˜ ê°€ê²©)
4. íŠ¸ëœì­ì…˜ ì²˜ë¦¬
   - ì£¼ë¬¸ ìƒì„±
   - ì£¼ë¬¸ ì•„ì´í…œ ìƒì„±
   - ì¬ê³  ê°ì†Œ
   - ì¬ê³  0ì´ë©´ íŒë§¤ ì¤‘ì§€
5. ì£¼ë¬¸ ë²ˆí˜¸ ìƒì„±

**ì¬ê³  ê´€ë¦¬ ë¡œì§**
- ì£¼ë¬¸ ì‹œ ìë™ ì¬ê³  ê°ì†Œ
- ì¬ê³  0ì´ë©´ `is_available = FALSE`
- ê´€ë¦¬ìê°€ ì¬ê³  ì¶”ê°€ ì‹œ íŒë§¤ ì¬ê°œ

**ì£¼ë¬¸ ìƒíƒœ ì „ì´**
- pending â†’ preparing â†’ completed
- pending â†’ cancelled (ì·¨ì†ŒëŠ” ì ‘ìˆ˜ ìƒíƒœì—ì„œë§Œ ê°€ëŠ¥)

---

## 3. í”„ë¡œì íŠ¸ êµ¬ì¡° ìƒì„±

### 3.1 ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py                 # FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜ ì§„ì…ì 
â”‚   â”‚
â”‚   â”œâ”€â”€ api/                    # API ì—”ë“œí¬ì¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ v1/
â”‚   â”‚       â””â”€â”€ __init__.py
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                 # SQLAlchemy ëª¨ë¸
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”‚
â”‚   â”œâ”€â”€ schemas/                # Pydantic ìŠ¤í‚¤ë§ˆ
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”‚
â”‚   â”œâ”€â”€ services/               # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                   # ì„¤ì • ë° ë°ì´í„°ë² ì´ìŠ¤
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”‚
â”‚   â””â”€â”€ utils/                  # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚       â””â”€â”€ __init__.py
â”‚
â”œâ”€â”€ tests/                      # í…ŒìŠ¤íŠ¸ íŒŒì¼
â”‚   â””â”€â”€ __init__.py
â”‚
â”œâ”€â”€ alembic/                    # ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ (í–¥í›„ ì¶”ê°€)
â”‚
â”œâ”€â”€ requirements.txt            # Python íŒ¨í‚¤ì§€ ì˜ì¡´ì„±
â”œâ”€â”€ env_example.txt             # í™˜ê²½ ë³€ìˆ˜ ì˜ˆì‹œ
â”œâ”€â”€ .gitignore                  # Git ì œì™¸ íŒŒì¼
â””â”€â”€ README.md                   # ê°œë°œ ê°€ì´ë“œ
```

### 3.2 ì„¤ê³„ ì›ì¹™

**ëª¨ë“ˆí™”**
- ê° ê¸°ëŠ¥ì„ ë…ë¦½ì ì¸ ëª¨ë“ˆë¡œ ë¶„ë¦¬
- api, models, schemas, services ê³„ì¸µ ë¶„ë¦¬
- ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ë¶„ë¦¬

**í™•ì¥ì„±**
- API ë²„ì „ ê´€ë¦¬ (v1, v2 ë“±)
- ìƒˆë¡œìš´ ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€ ìš©ì´
- í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ êµ¬ì¡°

**ìœ ì§€ë³´ìˆ˜ì„±**
- ëª…í™•í•œ ë””ë ‰í† ë¦¬ êµ¬ì¡°
- í‘œì¤€ ë„¤ì´ë° ì»¨ë²¤ì…˜
- ë¬¸ì„œí™”ëœ ì½”ë“œ

---

## 4. ì£¼ìš” íŒŒì¼ ì„¤ëª…

### 4.1 requirements.txt

Python íŒ¨í‚¤ì§€ ì˜ì¡´ì„±ì„ ì •ì˜í•œ íŒŒì¼ì…ë‹ˆë‹¤.

**ì£¼ìš” íŒ¨í‚¤ì§€**
- `fastapi==0.109.0`: ì›¹ í”„ë ˆì„ì›Œí¬
- `uvicorn[standard]==0.27.0`: ASGI ì„œë²„
- `sqlalchemy==2.0.25`: ORM
- `asyncpg==0.29.0`: ë¹„ë™ê¸° PostgreSQL ë“œë¼ì´ë²„
- `alembic==1.13.1`: ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
- `pydantic==2.5.3`: ë°ì´í„° ê²€ì¦
- `python-jose[cryptography]==3.3.0`: JWT ì¸ì¦
- `pytest==7.4.4`: í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬

### 4.2 app/main.py

FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì§„ì…ì ì…ë‹ˆë‹¤.

**ì£¼ìš” ê¸°ëŠ¥**
1. FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„±
2. CORS ë¯¸ë“¤ì›¨ì–´ ì„¤ì •
3. ê¸°ë³¸ ì—”ë“œí¬ì¸íŠ¸ ì •ì˜
   - `GET /`: API ìƒíƒœ í™•ì¸
   - `GET /health`: í—¬ìŠ¤ ì²´í¬
   - `GET /api/v1/test`: í…ŒìŠ¤íŠ¸ ì—”ë“œí¬ì¸íŠ¸

**ì½”ë“œ í•˜ì´ë¼ì´íŠ¸**
```python
app = FastAPI(
    title="OrderBean API",
    description="ì»¤í”¼ ì£¼ë¬¸ ê´€ë¦¬ ì‹œìŠ¤í…œ ë°±ì—”ë“œ API",
    version="1.0.0",
    docs_url="/api/docs",
    redoc_url="/api/redoc",
)

# CORS ì„¤ì •
app.add_middleware(
    CORSMiddleware,
    allow_origins=["http://localhost:5173"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

### 4.3 env_example.txt

í™˜ê²½ ë³€ìˆ˜ ì˜ˆì‹œ íŒŒì¼ì…ë‹ˆë‹¤. ì‹¤ì œ ì‚¬ìš© ì‹œ `.env` íŒŒì¼ë¡œ ë³µì‚¬í•˜ì—¬ ì‚¬ìš©í•©ë‹ˆë‹¤.

**ì£¼ìš” í™˜ê²½ ë³€ìˆ˜**
- `DATABASE_URL`: PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° URL
- `SECRET_KEY`: JWT í† í° ìƒì„±ìš© ë¹„ë°€í‚¤
- `ALLOWED_ORIGINS`: CORS í—ˆìš© ë„ë©”ì¸
- `ENVIRONMENT`: ê°œë°œ/í”„ë¡œë•ì…˜ í™˜ê²½ êµ¬ë¶„

### 4.4 .gitignore

Git ë²„ì „ ê´€ë¦¬ì—ì„œ ì œì™¸í•  íŒŒì¼/í´ë”ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

**ì£¼ìš” ì œì™¸ í•­ëª©**
- Python ìºì‹œ íŒŒì¼ (`__pycache__/`, `*.pyc`)
- ê°€ìƒí™˜ê²½ (`venv/`, `.venv/`)
- í™˜ê²½ ë³€ìˆ˜ íŒŒì¼ (`.env`)
- IDE ì„¤ì • (`.vscode/`, `.idea/`)
- ë°ì´í„°ë² ì´ìŠ¤ íŒŒì¼ (`*.db`, `*.sqlite3`)
- ë¡œê·¸ íŒŒì¼ (`*.log`)

### 4.5 README.md

ë°±ì—”ë“œ ê°œë°œ ê°€ì´ë“œ ë¬¸ì„œì…ë‹ˆë‹¤.

**í¬í•¨ ë‚´ìš©**
- ê¸°ìˆ  ìŠ¤íƒ ì†Œê°œ
- í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¤ëª…
- ì‹œì‘í•˜ê¸° ê°€ì´ë“œ
  - ê°€ìƒí™˜ê²½ ì„¤ì •
  - íŒ¨í‚¤ì§€ ì„¤ì¹˜
  - ì„œë²„ ì‹¤í–‰
- API ë¬¸ì„œ ë§í¬
- ê°œë°œ/í…ŒìŠ¤íŠ¸/ë°°í¬ ê°€ì´ë“œ

---

## 5. ê°œë°œ í™˜ê²½ ì„¤ì • ê°€ì´ë“œ

### 5.1 ì‚¬ì „ ìš”êµ¬ì‚¬í•­

- Python 3.11 ì´ìƒ
- PostgreSQL 15 ì´ìƒ (í–¥í›„ ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ ì‹œ)
- Git

### 5.2 ì„¤ì¹˜ ë° ì‹¤í–‰ ë‹¨ê³„

#### Step 1: ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”

```bash
# backend ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd backend

# ê°€ìƒí™˜ê²½ ìƒì„±
python -m venv venv

# ê°€ìƒí™˜ê²½ í™œì„±í™” (Windows)
venv\Scripts\activate

# ê°€ìƒí™˜ê²½ í™œì„±í™” (macOS/Linux)
source venv/bin/activate
```

#### Step 2: íŒ¨í‚¤ì§€ ì„¤ì¹˜

```bash
pip install -r requirements.txt
```

**ì˜ˆìƒ ì„¤ì¹˜ ì‹œê°„**: 2-5ë¶„

#### Step 3: í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (ì„ íƒì‚¬í•­)

```bash
# env_example.txtë¥¼ .envë¡œ ë³µì‚¬
copy env_example.txt .env    # Windows
cp env_example.txt .env      # macOS/Linux

# .env íŒŒì¼ í¸ì§‘ (í•„ìš”í•œ ê²½ìš°)
```

#### Step 4: ì„œë²„ ì‹¤í–‰

```bash
# ê°œë°œ ì„œë²„ ì‹¤í–‰ (í•« ë¦¬ë¡œë“œ í™œì„±í™”)
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

**ì„œë²„ ì‹œì‘ í™•ì¸**
```
INFO:     Will watch for changes in these directories: ['C:\\DEV\\Cursor_pro\\OrderBean\\backend']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [xxxxx] using WatchFiles
INFO:     Started server process [xxxxx]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
```

#### Step 5: API í…ŒìŠ¤íŠ¸

**ë¸Œë¼ìš°ì €ì—ì„œ í™•ì¸**
1. http://localhost:8000/ - ë£¨íŠ¸ ì—”ë“œí¬ì¸íŠ¸
2. http://localhost:8000/health - í—¬ìŠ¤ ì²´í¬
3. http://localhost:8000/api/v1/test - í…ŒìŠ¤íŠ¸ ì—”ë“œí¬ì¸íŠ¸
4. http://localhost:8000/api/docs - Swagger UI (ìë™ API ë¬¸ì„œ)
5. http://localhost:8000/api/redoc - ReDoc (ìë™ API ë¬¸ì„œ)

**curlë¡œ í…ŒìŠ¤íŠ¸**
```bash
# ë£¨íŠ¸ ì—”ë“œí¬ì¸íŠ¸
curl http://localhost:8000/

# í—¬ìŠ¤ ì²´í¬
curl http://localhost:8000/health

# í…ŒìŠ¤íŠ¸ ì—”ë“œí¬ì¸íŠ¸
curl http://localhost:8000/api/v1/test
```

**ì˜ˆìƒ ì‘ë‹µ (ë£¨íŠ¸ ì—”ë“œí¬ì¸íŠ¸)**
```json
{
  "message": "OrderBean API Server",
  "version": "1.0.0",
  "status": "running",
  "timestamp": "2025-11-02T10:30:00.123456",
  "docs": "/api/docs"
}
```

**ì˜ˆìƒ ì‘ë‹µ (í…ŒìŠ¤íŠ¸ ì—”ë“œí¬ì¸íŠ¸)**
```json
{
  "success": true,
  "message": "FastAPI ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤!",
  "data": {
    "framework": "FastAPI",
    "python": "3.11+",
    "features": ["ë¹„ë™ê¸° ì²˜ë¦¬", "ìë™ API ë¬¸ì„œ", "íƒ€ì… ê²€ì¦"]
  }
}
```

### 5.3 Swagger UI ì‚¬ìš©ë²•

1. ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:8000/api/docs ì ‘ì†
2. ê° API ì—”ë“œí¬ì¸íŠ¸ í™•ì¸
3. "Try it out" ë²„íŠ¼ í´ë¦­í•˜ì—¬ ì§ì ‘ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
4. íŒŒë¼ë¯¸í„° ì…ë ¥ í›„ "Execute" í´ë¦­
5. ì‘ë‹µ í™•ì¸

---

## 6. ë‹¤ìŒ ë‹¨ê³„

### 6.1 ì¦‰ì‹œ ì§„í–‰ ê°€ëŠ¥í•œ ì‘ì—…

âœ… **ê°€ìƒí™˜ê²½ ì„¤ì • ë° íŒ¨í‚¤ì§€ ì„¤ì¹˜**
```bash
cd backend
python -m venv venv
venv\Scripts\activate  # Windows
pip install -r requirements.txt
```

âœ… **ì„œë²„ ì‹¤í–‰ ë° ì ‘ì† í…ŒìŠ¤íŠ¸**
```bash
uvicorn app.main:app --reload
```

### 6.2 ë‹¨ê³„ë³„ ê°œë°œ ê³„íš

#### Phase 1: ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • (1-2ì¼)

- [ ] PostgreSQL ì„¤ì¹˜ ë° ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
- [ ] SQLAlchemy ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„¤ì •
- [ ] ëª¨ë¸ ì •ì˜ (Menus, Options, Orders, OrderItems)
- [ ] Alembic ë§ˆì´ê·¸ë ˆì´ì…˜ ì´ˆê¸°í™”
- [ ] ì´ˆê¸° ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„± ë° ì ìš©
- [ ] ì‹œë“œ ë°ì´í„° ì‘ì„±

**ì˜ˆìƒ ì‘ì—… íŒŒì¼**
- `app/core/database.py`: ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„¤ì •
- `app/core/config.py`: í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬
- `app/models/menu.py`: Menu ëª¨ë¸
- `app/models/option.py`: Option ëª¨ë¸
- `app/models/order.py`: Order ëª¨ë¸
- `app/models/order_item.py`: OrderItem ëª¨ë¸

#### Phase 2: ë©”ë‰´ API êµ¬í˜„ (2-3ì¼)

- [ ] Pydantic ìŠ¤í‚¤ë§ˆ ì •ì˜
- [ ] `GET /api/v1/menus` êµ¬í˜„
- [ ] `GET /api/v1/menus/:id` êµ¬í˜„
- [ ] ë©”ë‰´-ì˜µì…˜ ê´€ê³„ ì¿¼ë¦¬ ìµœì í™”
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±

**ì˜ˆìƒ ì‘ì—… íŒŒì¼**
- `app/schemas/menu.py`: Menu ìŠ¤í‚¤ë§ˆ
- `app/schemas/option.py`: Option ìŠ¤í‚¤ë§ˆ
- `app/api/v1/menus.py`: ë©”ë‰´ API ë¼ìš°í„°
- `app/services/menu_service.py`: ë©”ë‰´ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
- `tests/test_menus.py`: ë©”ë‰´ API í…ŒìŠ¤íŠ¸

#### Phase 3: ì£¼ë¬¸ API êµ¬í˜„ (3-4ì¼)

- [ ] ì£¼ë¬¸ ìŠ¤í‚¤ë§ˆ ì •ì˜
- [ ] `POST /api/v1/orders` êµ¬í˜„
- [ ] ì£¼ë¬¸ ìƒì„± ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
- [ ] ì¬ê³  ê´€ë¦¬ ë¡œì§
- [ ] íŠ¸ëœì­ì…˜ ì²˜ë¦¬
- [ ] í†µí•© í…ŒìŠ¤íŠ¸

**ì˜ˆìƒ ì‘ì—… íŒŒì¼**
- `app/schemas/order.py`: Order ìŠ¤í‚¤ë§ˆ
- `app/api/v1/orders.py`: ì£¼ë¬¸ API ë¼ìš°í„°
- `app/services/order_service.py`: ì£¼ë¬¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
- `app/utils/order_number.py`: ì£¼ë¬¸ ë²ˆí˜¸ ìƒì„±
- `tests/test_orders.py`: ì£¼ë¬¸ API í…ŒìŠ¤íŠ¸

#### Phase 4: ê´€ë¦¬ì API êµ¬í˜„ (2-3ì¼)

- [ ] ê´€ë¦¬ì ê¶Œí•œ ë¯¸ë“¤ì›¨ì–´
- [ ] `GET /api/v1/admin/orders` êµ¬í˜„
- [ ] `PATCH /api/v1/admin/orders/:id/status` êµ¬í˜„
- [ ] `GET /api/v1/admin/menus/stock` êµ¬í˜„
- [ ] í†µê³„ ê³„ì‚° ë¡œì§
- [ ] í…ŒìŠ¤íŠ¸

**ì˜ˆìƒ ì‘ì—… íŒŒì¼**
- `app/api/v1/admin.py`: ê´€ë¦¬ì API ë¼ìš°í„°
- `app/core/auth.py`: ì¸ì¦ ë¯¸ë“¤ì›¨ì–´
- `app/services/admin_service.py`: ê´€ë¦¬ì ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
- `tests/test_admin.py`: ê´€ë¦¬ì API í…ŒìŠ¤íŠ¸

#### Phase 5: ë°°í¬ ì¤€ë¹„ (1-2ì¼)

- [ ] í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
- [ ] í”„ë¡œë•ì…˜ ì„¤ì •
- [ ] Render ë°°í¬
- [ ] í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ í…ŒìŠ¤íŠ¸

### 6.3 ì°¸ê³  ë¬¸ì„œ

- **ë°±ì—”ë“œ PRD**: `Docs/Backend_PRD.md`
- **FastAPI ê³µì‹ ë¬¸ì„œ**: https://fastapi.tiangolo.com
- **SQLAlchemy ë¬¸ì„œ**: https://docs.sqlalchemy.org
- **Alembic ë¬¸ì„œ**: https://alembic.sqlalchemy.org

---

## 7. ë¬¸ì œ í•´ê²° (Troubleshooting)

### 7.1 ê°€ìƒí™˜ê²½ í™œì„±í™” ì˜¤ë¥˜

**ë¬¸ì œ**: `venv\Scripts\activate` ì‹¤í–‰ ì‹œ ì˜¤ë¥˜ ë°œìƒ

**í•´ê²° ë°©ë²•** (Windows PowerShell):
```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### 7.2 íŒ¨í‚¤ì§€ ì„¤ì¹˜ ì˜¤ë¥˜

**ë¬¸ì œ**: `pip install -r requirements.txt` ì‹¤í–‰ ì‹œ ì˜¤ë¥˜ ë°œìƒ

**í•´ê²° ë°©ë²•**:
```bash
# pip ì—…ê·¸ë ˆì´ë“œ
python -m pip install --upgrade pip

# íŒ¨í‚¤ì§€ ì¬ì„¤ì¹˜
pip install -r requirements.txt
```

### 7.3 ì„œë²„ ì‹¤í–‰ í¬íŠ¸ ì¶©ëŒ

**ë¬¸ì œ**: 8000 í¬íŠ¸ê°€ ì´ë¯¸ ì‚¬ìš© ì¤‘

**í•´ê²° ë°©ë²•**:
```bash
# ë‹¤ë¥¸ í¬íŠ¸ ì‚¬ìš©
uvicorn app.main:app --reload --port 8001
```

### 7.4 CORS ì˜¤ë¥˜

**ë¬¸ì œ**: í”„ë¡ íŠ¸ì—”ë“œì—ì„œ API í˜¸ì¶œ ì‹œ CORS ì˜¤ë¥˜ ë°œìƒ

**í•´ê²° ë°©ë²•**: `app/main.py`ì˜ `allow_origins`ì— í”„ë¡ íŠ¸ì—”ë“œ URL ì¶”ê°€
```python
allow_origins=[
    "http://localhost:5173",
    "http://localhost:3000",
    "https://yourdomain.com",  # ì¶”ê°€
]
```

---

## 8. ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì™„ë£Œëœ ì‘ì—… âœ…

- [x] ë°±ì—”ë“œ PRD ë¬¸ì„œ ì‘ì„±
- [x] í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì¡° ìƒì„±
- [x] `requirements.txt` ì‘ì„±
- [x] `app/main.py` ì‘ì„± (ê¸°ë³¸ ì—”ë“œí¬ì¸íŠ¸)
- [x] `README.md` ì‘ì„±
- [x] í™˜ê²½ ë³€ìˆ˜ ì˜ˆì‹œ íŒŒì¼ ì‘ì„±
- [x] `.gitignore` ì‘ì„±

### ëŒ€ê¸° ì¤‘ì¸ ì‘ì—… â³

- [ ] Python ê°€ìƒí™˜ê²½ ì„¤ì •
- [ ] íŒ¨í‚¤ì§€ ì„¤ì¹˜
- [ ] ì„œë²„ ì‹¤í–‰ ë° ì ‘ì† í…ŒìŠ¤íŠ¸
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„¤ì •
- [ ] SQLAlchemy ëª¨ë¸ ì •ì˜
- [ ] API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„
- [ ] í…ŒìŠ¤íŠ¸ ì‘ì„±

---

## 9. ê²°ë¡ 

FastAPI + Python ê¸°ë°˜ ë°±ì—”ë“œ ê°œë°œì„ ìœ„í•œ ê¸°ë³¸ í™˜ê²½ êµ¬ì¶•ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤.

### 9.1 ë‹¬ì„±í•œ ëª©í‘œ

1. âœ… **ì²´ê³„ì ì¸ í”„ë¡œì íŠ¸ êµ¬ì¡°**: í™•ì¥ ê°€ëŠ¥í•˜ê³  ìœ ì§€ë³´ìˆ˜ê°€ ì‰¬ìš´ ë””ë ‰í† ë¦¬ êµ¬ì¡°
2. âœ… **ìƒì„¸í•œ PRD ë¬¸ì„œ**: ë°ì´í„° ëª¨ë¸, API ì„¤ê³„, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì •ì˜
3. âœ… **ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥í•œ ì½”ë“œ**: ê¸°ë³¸ FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ í…ŒìŠ¤íŠ¸ ì—”ë“œí¬ì¸íŠ¸
4. âœ… **ê°œë°œ ê°€ì´ë“œ ë¬¸ì„œ**: ì„¤ì¹˜ë¶€í„° ì‹¤í–‰ê¹Œì§€ ë‹¨ê³„ë³„ ê°€ì´ë“œ

### 9.2 ë‹¤ìŒ ì‘ì—…ìë¥¼ ìœ„í•œ ë©”ëª¨

1. **ê°€ìƒí™˜ê²½ ì„¤ì • í•„ìˆ˜**: í”„ë¡œì íŠ¸ ê²©ë¦¬ë¥¼ ìœ„í•´ ë°˜ë“œì‹œ ê°€ìƒí™˜ê²½ ì‚¬ìš©
2. **í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬**: `.env` íŒŒì¼ì€ Gitì— ì»¤ë°‹í•˜ì§€ ì•Šê¸° (`.gitignore`ì— í¬í•¨ë¨)
3. **API ë¬¸ì„œ í™œìš©**: Swagger UI (`/api/docs`)ë¥¼ í†µí•´ API í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
4. **ì½”ë“œ í¬ë§·íŒ…**: Black, Pylint ì‚¬ìš© ê¶Œì¥
5. **í…ŒìŠ¤íŠ¸ ì‘ì„±**: pytestë¡œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ë° í†µí•© í…ŒìŠ¤íŠ¸ ì‘ì„±

### 9.3 ì˜ˆìƒ ê°œë°œ ì¼ì •

- **Phase 1 (ë°ì´í„°ë² ì´ìŠ¤)**: 1-2ì¼
- **Phase 2 (ë©”ë‰´ API)**: 2-3ì¼
- **Phase 3 (ì£¼ë¬¸ API)**: 3-4ì¼
- **Phase 4 (ê´€ë¦¬ì API)**: 2-3ì¼
- **Phase 5 (ë°°í¬)**: 1-2ì¼
- **ì´ ì˜ˆìƒ ê¸°ê°„**: ì•½ 2-3ì£¼

---

## ë¶€ë¡ A: ìƒì„±ëœ íŒŒì¼ ëª©ë¡

```
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ v1/
â”‚   â”‚       â””â”€â”€ __init__.py
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”œâ”€â”€ schemas/
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ __init__.py
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ __init__.py
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ env_example.txt
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

**ì´ íŒŒì¼ ìˆ˜**: 16ê°œ

---

## ë¶€ë¡ B: ì£¼ìš” ëª…ë ¹ì–´ ìš”ì•½

```bash
# ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”
cd backend
python -m venv venv
venv\Scripts\activate  # Windows

# íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install -r requirements.txt

# ì„œë²„ ì‹¤í–‰
uvicorn app.main:app --reload

# í…ŒìŠ¤íŠ¸ ì‹¤í–‰
pytest

# ì½”ë“œ í¬ë§·íŒ…
black app/

# ì½”ë“œ ê²€ì‚¬
pylint app/
```

---

**ë¬¸ì„œ ì‘ì„±ì¼**: 2025ë…„ 11ì›” 2ì¼  
**ì‘ì„±ì**: AI Assistant  
**ë²„ì „**: 1.0  
**ë‹¤ìŒ ì—…ë°ì´íŠ¸**: ì„œë²„ ì‹¤í–‰ í…ŒìŠ¤íŠ¸ ì™„ë£Œ í›„

```

ì™„ë£Œí–ˆìŠµë‹ˆë‹¤! ì§€ê¸ˆê¹Œì§€ ì‘ì—…í•œ ëª¨ë“  ë‚´ìš©ì„ `Report/backend-development-environment-setup-report.md` íŒŒì¼ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.

## ğŸ“„ ë³´ê³ ì„œ ë‚´ìš© ìš”ì•½

### ì‘ì„±ëœ ë³´ê³ ì„œ: `backend-development-environment-setup-report.md`

ë³´ê³ ì„œì—ëŠ” ë‹¤ìŒ ë‚´ìš©ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

1. **ì‘ì—… ê°œìš”**
   - ë°±ì—”ë“œ PRD ì‘ì„± ì™„ë£Œ
   - í”„ë¡œì íŠ¸ êµ¬ì¡° ìƒì„± ì™„ë£Œ
   - í•µì‹¬ ì„¤ì • íŒŒì¼ ì‘ì„± ì™„ë£Œ

2. **ë°±ì—”ë“œ PRD ìš”ì•½**
   - ë°ì´í„° ëª¨ë¸ ì„¤ê³„ (Menus, Options, Orders, OrderItems)
   - API ì„¤ê³„ (ë©”ë‰´, ì£¼ë¬¸, ê´€ë¦¬ì API)
   - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (ì£¼ë¬¸ í”„ë¡œì„¸ìŠ¤, ì¬ê³  ê´€ë¦¬, ìƒíƒœ ì „ì´)

3. **í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¤ëª…**
   - ì „ì²´ ë””ë ‰í† ë¦¬ êµ¬ì¡°
   - ê° ëª¨ë“ˆë³„ ì—­í• 
   - ì„¤ê³„ ì›ì¹™

4. **ì£¼ìš” íŒŒì¼ ì„¤ëª…**
   - `requirements.txt`: íŒ¨í‚¤ì§€ ì˜ì¡´ì„±
   - `app/main.py`: FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜
   - `env_example.txt`: í™˜ê²½ ë³€ìˆ˜
   - `README.md`: ê°œë°œ ê°€ì´ë“œ

5. **ê°œë°œ í™˜ê²½ ì„¤ì • ê°€ì´ë“œ**
   - 5ë‹¨ê³„ ì„¤ì¹˜ ë° ì‹¤í–‰ ì ˆì°¨
   - API í…ŒìŠ¤íŠ¸ ë°©ë²•
   - Swagger UI ì‚¬ìš©ë²•

6. **ë‹¤ìŒ ë‹¨ê³„ ê³„íš**
   - Phase 1-5ê¹Œì§€ ìƒì„¸í•œ ê°œë°œ ë¡œë“œë§µ
   - ê° ë‹¨ê³„ë³„ ì‘ì—… íŒŒì¼ ëª©ë¡

7. **ë¬¸ì œ í•´ê²° ê°€ì´ë“œ**
   - ê°€ìƒí™˜ê²½ í™œì„±í™” ì˜¤ë¥˜
   - íŒ¨í‚¤ì§€ ì„¤ì¹˜ ì˜¤ë¥˜
   - CORS ì˜¤ë¥˜ ë“±

8. **ë¶€ë¡**
   - ìƒì„±ëœ íŒŒì¼ ëª©ë¡ (16ê°œ)
   - ì£¼ìš” ëª…ë ¹ì–´ ìš”ì•½

## ğŸ“Š ì‘ì—… í˜„í™©

### âœ… ì™„ë£Œëœ ì‘ì—…
- ë°±ì—”ë“œ PRD ë¬¸ì„œ ì‘ì„± (`Docs/Backend_PRD.md`)
- í”„ë¡œì íŠ¸ êµ¬ì¡° ìƒì„± (16ê°œ íŒŒì¼)
- ê¸°ë³¸ FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜ ì‘ì„±
- ê°œë°œ í™˜ê²½ ì„¤ì • ë¦¬í¬íŠ¸ ì‘ì„±

### ğŸ”œ ë‹¤ìŒ ë‹¨ê³„ (ì‚¬ìš©ìê°€ ì§ì ‘ ì‹¤í–‰ í•„ìš”)
1. ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”
2. íŒ¨í‚¤ì§€ ì„¤ì¹˜
3. ì„œë²„ ì‹¤í–‰ ë° ì ‘ì† í…ŒìŠ¤íŠ¸

ì‹¤ì œ ì„œë²„ë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì‹œë©´ ë©ë‹ˆë‹¤:

```bash
cd backend
python -m venv venv
venv\Scripts\activate
pip install -r requirements.txt
uvicorn app.main:app --reload
```

```shellscript
cd backend
python -m venv venv
venv\Scripts\activate
pip install -r requirements.txt
uvicorn app.main:app --reload
```

---

**User**

ì§€ê¸ˆê¹Œì§€ ì‘ì—…í•œ ë‚´ìš©ì„ frontend ë¸Œëœì¹˜ì—ì„œ backend ë¸Œëœì¹˜ë¥¼ ìƒˆë¡œ ìƒì„±í•´ @https://github.com/kznetwork/OrderBean.git ê¹ƒí—ˆë¸Œì— ì—…ë¡œë“œí•  ìˆ˜ ìˆì„ê¹Œ?

---

**Cursor**

ë„¤, ê°€ëŠ¥í•©ë‹ˆë‹¤! í˜„ì¬ frontend ë¸Œëœì¹˜ì—ì„œ backend ë¸Œëœì¹˜ë¥¼ ìƒˆë¡œ ìƒì„±í•˜ì—¬ ë°±ì—”ë“œ ì‘ì—… ë‚´ìš©ì„ GitHubì— ì—…ë¡œë“œí•˜ê² ìŠµë‹ˆë‹¤.

ì™„ë²½í•©ë‹ˆë‹¤! ì»¤ë°‹ì´ ì„±ê³µí–ˆìŠµë‹ˆë‹¤. ì´ì œ GitHubì— backend ë¸Œëœì¹˜ë¥¼ í‘¸ì‹œí•˜ê² ìŠµë‹ˆë‹¤.

ì™„ë£Œí–ˆìŠµë‹ˆë‹¤! ğŸ‰

## âœ… GitHub ì—…ë¡œë“œ ì™„ë£Œ

backend ë¸Œëœì¹˜ê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì–´ GitHubì— ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!

### ğŸ“Š ì—…ë¡œë“œëœ ë‚´ìš©

**ì»¤ë°‹ ì •ë³´**
- **ë¸Œëœì¹˜**: `backend` (ìƒˆë¡œ ìƒì„±)
- **ì»¤ë°‹ ë©”ì‹œì§€**: "feat: Add FastAPI backend development environment and documentation"
- **ë³€ê²½ ë‚´ìš©**: 16ê°œ íŒŒì¼, 2,656ì¤„ ì¶”ê°€

**ì—…ë¡œë“œëœ íŒŒì¼ ëª©ë¡**

1. **ë¬¸ì„œ íŒŒì¼ (2ê°œ)**
   - `Docs/Backend_PRD.md` - ë°±ì—”ë“œ ê°œë°œ ìš”êµ¬ì‚¬í•­ ë¬¸ì„œ
   - `Report/backend-development-environment-setup-report.md` - ê°œë°œ í™˜ê²½ êµ¬ì¶• ë³´ê³ ì„œ

2. **ë°±ì—”ë“œ í”„ë¡œì íŠ¸ íŒŒì¼ (14ê°œ)**
   - `backend/requirements.txt` - Python íŒ¨í‚¤ì§€ ì˜ì¡´ì„±
   - `backend/README.md` - ê°œë°œ ê°€ì´ë“œ
   - `backend/.gitignore` - Git ì œì™¸ íŒŒì¼
   - `backend/env_example.txt` - í™˜ê²½ ë³€ìˆ˜ ì˜ˆì‹œ
   - `backend/app/__init__.py` - ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™”
   - `backend/app/main.py` - FastAPI ì§„ì…ì 
   - `backend/app/api/__init__.py` - API ë¼ìš°í„°
   - `backend/app/api/v1/__init__.py` - API v1
   - `backend/app/models/__init__.py` - ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸
   - `backend/app/schemas/__init__.py` - Pydantic ìŠ¤í‚¤ë§ˆ
   - `backend/app/services/__init__.py` - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
   - `backend/app/core/__init__.py` - ì½”ì–´ ì„¤ì •
   - `backend/app/utils/__init__.py` - ìœ í‹¸ë¦¬í‹°
   - `backend/tests/__init__.py` - í…ŒìŠ¤íŠ¸

### ğŸŒ¿ í˜„ì¬ ë¸Œëœì¹˜ êµ¬ì¡°

```
ğŸ“ OrderBean Repository
â”œâ”€â”€ main (ë©”ì¸ ë¸Œëœì¹˜)
â”œâ”€â”€ requirements (ìš”êµ¬ì‚¬í•­ ë¸Œëœì¹˜)
â”œâ”€â”€ frontend (í”„ë¡ íŠ¸ì—”ë“œ ë¸Œëœì¹˜)
â””â”€â”€ backend (ë°±ì—”ë“œ ë¸Œëœì¹˜) â­ NEW!
```

### ğŸ”— GitHub ë§í¬

- **ì €ì¥ì†Œ**: https://github.com/kznetwork/OrderBean.git
- **backend ë¸Œëœì¹˜**: https://github.com/kznetwork/OrderBean/tree/backend
- **Pull Request ìƒì„±**: https://github.com/kznetwork/OrderBean/pull/new/backend

### ğŸ“ ë‹¤ìŒ ë‹¨ê³„

1. **GitHubì—ì„œ í™•ì¸**: ë¸Œë¼ìš°ì €ì—ì„œ backend ë¸Œëœì¹˜ í™•ì¸
2. **Pull Request ìƒì„±** (ì„ íƒì‚¬í•­): backend â†’ main ë³‘í•©ì„ ìœ„í•œ PR ìƒì„±
3. **ë¡œì»¬ì—ì„œ ê°œë°œ ê³„ì†**:
   ```bash
   # backend ë¸Œëœì¹˜ì—ì„œ ê³„ì† ì‘ì—…
   cd backend
   python -m venv venv
   venv\Scripts\activate
   pip install -r requirements.txt
   uvicorn app.main:app --reload
   ```

4. **ë‹¤ë¥¸ ë¸Œëœì¹˜ë¡œ ì „í™˜** (í•„ìš”ì‹œ):
   ```bash
   git checkout frontend    # í”„ë¡ íŠ¸ì—”ë“œ ì‘ì—…
   git checkout requirements # ìš”êµ¬ì‚¬í•­ ì‘ì—…
   git checkout main        # ë©”ì¸ ë¸Œëœì¹˜
   ```

ì—…ë¡œë“œê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ğŸš€

```plaintext
ğŸ“ OrderBean Repository
â”œâ”€â”€ main (ë©”ì¸ ë¸Œëœì¹˜)
â”œâ”€â”€ requirements (ìš”êµ¬ì‚¬í•­ ë¸Œëœì¹˜)
â”œâ”€â”€ frontend (í”„ë¡ íŠ¸ì—”ë“œ ë¸Œëœì¹˜)
â””â”€â”€ backend (ë°±ì—”ë“œ ë¸Œëœì¹˜) â­ NEW!
```

```shellscript
   # backend ë¸Œëœì¹˜ì—ì„œ ê³„ì† ì‘ì—…
   cd backend
   python -m venv venv
   venv\Scripts\activate
   pip install -r requirements.txt
   uvicorn app.main:app --reload
```

```shellscript
   git checkout frontend    # í”„ë¡ íŠ¸ì—”ë“œ ì‘ì—…
   git checkout requirements # ìš”êµ¬ì‚¬í•­ ì‘ì—…
   git checkout main        # ë©”ì¸ ë¸Œëœì¹˜
```

